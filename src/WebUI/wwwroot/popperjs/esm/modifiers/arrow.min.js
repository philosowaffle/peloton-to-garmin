import getBasePlacement from"../utils/getBasePlacement.js";import getLayoutRect from"../dom-utils/getLayoutRect.js";import contains from"../dom-utils/contains.js";import getOffsetParent from"../dom-utils/getOffsetParent.js";import getMainAxisFromPlacement from"../utils/getMainAxisFromPlacement.js";import{within}from"../utils/within.js";import mergePaddingObject from"../utils/mergePaddingObject.js";import expandToHashMap from"../utils/expandToHashMap.js";import{left,right,basePlacements,top,bottom}from"../enums.js";import{isHTMLElement}from"../dom-utils/instanceOf.js";var toPaddingObject=function(e,t){return e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e,mergePaddingObject("number"!=typeof e?e:expandToHashMap(e,basePlacements))};function arrow(e){var t,r,o=e.state,n=e.name,i=e.options,s=o.elements.arrow,a=o.modifiersData.popperOffsets,m=getBasePlacement(o.placement),f=getMainAxisFromPlacement(m),p=0<=[left,right].indexOf(m)?"height":"width";s&&a&&(t=toPaddingObject(i.padding,o),r=getLayoutRect(s),e="y"===f?top:left,m="y"===f?bottom:right,i=o.rects.reference[p]+o.rects.reference[f]-a[f]-o.rects.popper[p],a=a[f]-o.rects.reference[f],s=(s=getOffsetParent(s))?"y"===f?s.clientHeight||0:s.clientWidth||0:0,e=t[e],m=s-r[p]-t[m],a=s/2-r[p]/2+(i/2-a/2),m=within(e,a,m),o.modifiersData[n]=((n={})[f]=m,n.centerOffset=m-a,n))}function effect(e){var t=e.state,e=e.options.element,e=void 0===e?"[data-popper-arrow]":e;null!=e&&("string"!=typeof e||(e=t.elements.popper.querySelector(e)))&&contains(t.elements.popper,e)&&(t.elements.arrow=e)}export default{name:"arrow",enabled:!0,phase:"main",fn:arrow,effect:effect,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};