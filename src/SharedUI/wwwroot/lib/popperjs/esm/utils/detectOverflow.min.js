import getClippingRect from"../dom-utils/getClippingRect.js";import getDocumentElement from"../dom-utils/getDocumentElement.js";import getBoundingClientRect from"../dom-utils/getBoundingClientRect.js";import computeOffsets from"./computeOffsets.js";import rectToClientRect from"./rectToClientRect.js";import{clippingParents,reference,popper,bottom,top,right,basePlacements,viewport}from"../enums.js";import{isElement}from"../dom-utils/instanceOf.js";import mergePaddingObject from"./mergePaddingObject.js";import expandToHashMap from"./expandToHashMap.js";export default function detectOverflow(e,t){var r,t=t=void 0===t?{}:t,o=t.placement,o=void 0===o?e.placement:o,n=t.strategy,n=void 0===n?e.strategy:n,p=t.boundary,p=void 0===p?clippingParents:p,i=t.rootBoundary,i=void 0===i?viewport:i,m=t.elementContext,m=void 0===m?popper:m,s=t.altBoundary,s=void 0!==s&&s,t=t.padding,t=void 0===t?0:t,t=mergePaddingObject("number"!=typeof t?t:expandToHashMap(t,basePlacements)),c=e.rects.popper,s=e.elements[s?m===popper?reference:popper:m],s=getClippingRect(isElement(s)?s:s.contextElement||getDocumentElement(e.elements.popper),p,i,n),p=getBoundingClientRect(e.elements.reference),i=computeOffsets({reference:p,element:c,strategy:"absolute",placement:o}),n=rectToClientRect(Object.assign({},c,i)),c=m===popper?n:p,l={top:s.top-c.top+t.top,bottom:c.bottom-s.bottom+t.bottom,left:s.left-c.left+t.left,right:c.right-s.right+t.right},i=e.modifiersData.offset;return m===popper&&i&&(r=i[o],Object.keys(l).forEach(function(e){var t=0<=[right,bottom].indexOf(e)?1:-1,o=0<=[top,bottom].indexOf(e)?"y":"x";l[e]+=r[o]*t})),l}