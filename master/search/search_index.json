{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"\ud83d\udc4b Hello!","text":"<p>P2G is an application that syncs your Peloton workouts to Garmin for free.  It does a few other things too\ud83d\ude42</p> <ul> <li>Sync recent and historcal workouts from Peloton to Garmin Connect</li> <li>Create backups</li> <li>Run on a schedule or on demand</li> <li>Windows, Mac, Linux, Docker, GitHub Actions</li> <li>And more...</li> </ul> <p>Head on over to the Install page to get started!</p> <p></p>"},{"location":"#example-usage","title":"Example Usage","text":"<ol> <li>Install P2G using one of the several Install options</li> <li>Do a Peloton Workout!<ol> <li>No need to user your watch</li> <li>If you use your watch to send HR data to the Peloton Bike or Tread then at the end of your workout do not save the workout on your watch, discard it.</li> </ol> </li> <li>Sync your workout using P2G<ol> <li>You can go to your computer and manually run P2G to sync recent workouts</li> <li>OR You can configure P2G to run in the background on your computer, syncing workouts once a day</li> </ol> </li> <li>Visit Garmin Connect and bask in the glory of all your training data living in one place!</li> </ol>"},{"location":"#contributors","title":"Contributors","text":"<p>Special thanks to all the contributors who have helped improve this project!</p>"},{"location":"contributing/","title":"Contributing","text":"<p>Enhancements and fixes are always welcome. Feel free to contribute to any of the Issues not already assigned to another person.</p>"},{"location":"contributing/#bug-fixes","title":"\ud83d\udc1b Bug Fixes","text":"<p>Feel free to dive right in and help fix bugs when you find them.  Just make sure you've thoroughly tested the fix and be sure to read about creating a good pull request.</p>"},{"location":"contributing/#new-features-refactors-and-enhancements","title":"\u2728 New Features, Refactors, and Enhancements","text":"<p>I really appreciate anyone willing to dive into the deep end to tackle more complex changes in P2G.  Here are some steps I ask you take before embarking on this journey.</p> <ol> <li>If an Issue doesn't already exist, please create one.</li> <li>Ensure the Issue describes in detail what the change is and why its needed</li> <li>Use the Issue to propose an implementation plan</li> <li>See creating a good pull request</li> </ol> <p>Please also keep the following in mind:</p> <ol> <li>P2G should never introduce any breaking or non-backwards compatible changes unless we are targeting a Major Version Release</li> <li>P2G supports many flavors of installl, all enhancements need to be implemented and tested on all flavors, or explicitly documented as not supported.</li> </ol> <p>What if you never merge my PR?</p>"},{"location":"contributing/#creating-a-good-pull-request","title":"Creating a good Pull Request","text":"<p>Ensure that your code:</p> <ol> <li>Compiles</li> <li>Follows established conventions of the codebase (check your white spaces)</li> <li>Keeps changes focused and minimizes scope creep</li> <li>Works for all flavors of P2G</li> <li>Unit tests have been added and pass</li> <li>Documentation Site has been updated</li> <li>Example Config Files and Docker files have been updated (when appropriate)</li> <li>Update the Release Notes file</li> </ol>"},{"location":"contributing/#contribute-to-this-site","title":"Contribute to this site","text":"<p>This documentation site is maintained from the repository, you can find and edit it here.</p>"},{"location":"contributing/#what-if-you-never-merge-my-pr","title":"\ud83d\udc7f What if you never merge my PR?","text":"<p>First, I'm sorry, I really do value that you've taken time to work through the code and give back to the community. Seriously, so few people actually do this, so thank you.</p> <p>There will be times where I choose not to accept what may otherwise be seen as a perfectly reasonable change in yours or others minds.</p> <p>I reserve this right as the primary maintainer and first line support for this project.  There will be changes that I may feel (subjectively) will make it harder for me to do my job and I will likely not merge these.</p> <p>Always, my motiviations are:</p> <ol> <li>The stability of P2G for all users</li> <li>Long term maintainability (for me)</li> <li>Ease of providing first line support to others</li> <li>Ease of future enhancements (for me)</li> <li>Ease of rollback, or hotfixing (for me)</li> <li>Providing the most functionality while minimizing the barrier of entry</li> </ol>"},{"location":"faq/","title":"F.A.Q.","text":"<p>Below are a list of commonly asked questions. For even more help head on over to the discussion forum.</p>"},{"location":"faq/#vo2-max-te-tss-and-more","title":"VO2 Max, TE, TSS and more...","text":"<p>Checkout the dedicated Category in the Discussion forum, I recommend starting with this post.</p>"},{"location":"faq/#garmin-two-step-verification","title":"Garmin Two Step Verification","text":"<p>Yes, P2G supports Garmin's Multi-factor Authentication option!  However, only some install options have support so you'll be limited to one of these options.</p>"},{"location":"features/","title":"Features","text":"<p>Convert, Backup, and Sync your Peloton workouts to Garmin Connect locally and for free.</p>"},{"location":"features/#typical-usage","title":"\ud83d\ude4c Typical Usage","text":"<ol> <li>Install P2G using one of the several Install options</li> <li>Configure to your hearts desire, or just use the out-of-the box working defaults.</li> <li>Do a Peloton Workout!<ol> <li>No need to user your watch.</li> <li>If you use your watch to send HR data to the Peloton Bike or Tread then at the end of your workout do not save the workout on your watch, just discard it.</li> </ol> </li> <li>Sync your workout using P2G<ol> <li>You can go to your computer and manually run P2G to sync recent workouts</li> <li>OR You can configure P2G to run in the background on your computer, syncing workouts once a day</li> </ol> </li> <li>Visit Garmin Connect and bask in the glory of all your training data living in one place!</li> </ol>"},{"location":"features/#p2g","title":"\ud83d\udcbb P2G","text":"<ol> <li>Syncs on-demand or on a schedule</li> <li>Save data locally, or upload to Garmin Connect... or both!</li> <li>Save data in mulitple formats: JSON, TCX, FIT</li> <li>Highly configurable</li> <li>Docker-ized</li> <li>OpenTelemetry for the data nerds</li> </ol>"},{"location":"features/#garmin-sync","title":"\u231a Garmin Sync","text":"<ol> <li>Supports Garmin accounts protected by Two Step Verification</li> <li>Synced workouts count towards Garmin Badges and Challenges</li> <li>Synced workouts count towards VO2 Max 1 and Training Stress Scores</li> <li>\"Stack\" back to back Peloton workouts into a single Activity on Garmin</li> </ol>"},{"location":"features/#workout-data","title":"\ud83d\udcc8 Workout Data","text":"<ol> <li>Workout Types Supported<ol> <li>Bike</li> <li>Tread</li> <li>Rower</li> <li>Meditation</li> <li>Strength</li> <li>Outdoor</li> <li>and more \u2728</li> </ol> </li> <li>Workout Data<ol> <li>Heart Rate</li> <li>Cadence</li> <li>Target Cadence</li> <li>Distance</li> <li>Power</li> <li>Laps</li> <li>and more \u2728</li> </ol> </li> <li>Strength Data<ol> <li>Exercise Name</li> <li>Rep count</li> <li>Weight</li> </ol> </li> <li>Automatically Combine Stacked Classes in a single Activity</li> </ol>"},{"location":"features/#screenshots","title":"\ud83d\uddbc\ufe0f Screenshots","text":""},{"location":"features/#converted-and-imported-cycling-workout","title":"Converted and imported Cycling Workout","text":""},{"location":"features/#stats-view","title":"Stats View","text":""},{"location":"features/#cadence-targets","title":"Cadence Targets","text":""},{"location":"features/#laps","title":"Laps","text":""},{"location":"features/#ui","title":"UI","text":""},{"location":"help/","title":"Help","text":"<p>If you are encountering a problem, here are some resources that may help you.</p>"},{"location":"help/#discussion-forum","title":"\ud83d\udcac Discussion Forum","text":"<p>Search the Discussion Forum to see if your topic has already been discussed before.  Take note that the search bar lets you filter by <code>open</code> and <code>closed</code> discussions, it is beneficial to check both.</p> <p>Have a question? Need help with something?</p> <p>The Discussion Forum is the best place to post.  When posting please ensure you are providing the right details.</p>"},{"location":"help/#issues","title":"\ud83d\udc1b Issues","text":"<p>Bugs, feature requests, and more often get tracked in the Issues tab in Github. This is also a great place to search for information.  Particularly important issues that impact many people will usually be pinned and highly visible.  Take note that the search bar lets you filter by <code>open</code> and <code>closed</code> issues, it is beneficial to check both.</p> <p>Have a feature idea? Encountered a bug?</p> <p>Creating a new Issue is the best place to post.  When posting please ensure you are providing the right details.</p>"},{"location":"help/#providing-the-right-details","title":"\ud83d\udc81\u200d\u2642\ufe0f Providing the right details","text":"<p>P2G can be run in a variety of different ways and its difficult for people to provide help if they have to guess about your particular setup.  When asking for help, or logging a bug, please be sure to include the below information at a minimum for the most effective help:</p> <ol> <li>How are you running P2G? In other words, which install mtehod did you choose when you setup P2G?</li> <li>What version of P2G are you running?</li> <li>A copy of the log files that were generated, ideally the entire log file, not just the part where you see an error. See Finding logs.</li> </ol>"},{"location":"help/#finding-logs","title":"\ud83d\udccb Finding logs","text":""},{"location":"help/#headless-docker-headless","title":"Headless / Docker Headless","text":"<p>The log files will be written to <code>output/p2g_log&lt;datetime&gt;.txt</code>.</p>"},{"location":"help/#windows-ui-web-ui","title":"Windows UI / Web UI","text":"<p>Naviate to the <code>About</code> page, then click the <code>Logs</code> tab.  There may be more than one tab, be sure to copy all the logs from both tabs.  Additionally, the log files will be written to <code>output/p2g_log&lt;datetime&gt;.txt</code>.</p> <p>In the UI, you can also temporarily increase the logging verbosity which can be helpful to capture even more details about a reproduceable error.  Simply increase the verbosity to <code>Verbose</code> and try to reproduce the issue, then check back to see what new logs were written.</p>"},{"location":"help/#github-actions","title":"GitHub Actions","text":"<p>If your forked repository is public, then you can simply provide a link to the repository and people can view the necessary logs from there.  If your repository is private then to find the logs for a given run:</p> <ol> <li>Go to your copy of the repository</li> <li>Select the <code>Actions</code> tab, along the top left of the view</li> <li>Click the very first `Sync workflow`` item to open up that workflow</li> <li>In the left hand menu, under Jobs click <code>sync</code></li> <li>Finally, expand the item that says <code>Run /app/PelotonToGarminConsole</code></li> <li>Share the logs from this view</li> </ol>"},{"location":"help/#finding-version","title":"#\ufe0f\u20e3 Finding version","text":"<p>Version information is always written as the first thing in the log file.  Additionally, on a UI version of P2G you can find the version information on the <code>About</code> page.</p>"},{"location":"configuration/","title":"Configuration","text":""},{"location":"configuration/#how-are-you-running-p2g","title":"\ud83d\udc4b How are you running P2G?","text":"<ol> <li>I'm using the Web UI</li> <li>I'm using the Windows GUI</li> <li>I'm using GitHub Actions</li> <li>I'm running Headless/Console Application</li> </ol>"},{"location":"configuration/#web-ui-configuration","title":"Web UI Configuration","text":"<p>The most common settings can be configured via the UI itself.  Additional lower level settings can be provided via config file.</p> <ol> <li>Settings<ol> <li>App Settings</li> <li>Conversion Settings</li> <li>Peloton Settings</li> <li>Garmin Settings</li> </ol> </li> <li>Low Level Settings<ol> <li>Api Configuration</li> <li>Web UI Configuration</li> </ol> </li> </ol>"},{"location":"configuration/#windows-ui-configuration","title":"Windows UI Configuration","text":"<p>The most common settings can be configured via the UI itself.</p> <ol> <li>Settings<ol> <li>App Settings</li> <li>Conversion Settings</li> <li>Peloton Settings</li> <li>Garmin Settings</li> </ol> </li> </ol>"},{"location":"configuration/#config-file","title":"Config File","text":"<p>When using a flavor of P2G that does not provide a user interface, all settings are provided via a JSON config file.</p> <p>P2G looks for a file named <code>configuration.local.json</code> in the same directory where it is run to load its settings.</p> <p>The structure of this file is as follows. Click the <code>+</code> to explore the details of each section.</p> <pre><code>{\n    \"App\": { /**(1)!**/ },\n    \"Format\": { /**(2)!**/ },\n    \"Peloton\": { /**(3)!**/ },\n    \"Garmin\": { /**(4)!**/ },\n    \"Observability\": { /**(5)!**/ }\n}\n</code></pre> <ol> <li>Go to App Settings Documentation</li> <li>Go to Format Settings Documentation</li> <li>Go to Peloton Settings Documentation</li> <li>Go to Garmin Settings Documentation</li> <li>Go to Observability Settings Documentation</li> </ol> <p>Tip</p> <p>P2G provides an example config to get you started.</p>"},{"location":"configuration/#additional-configuration-options","title":"Additional Configuration Options","text":"<p>P2G supports configuration via</p> <ol> <li>command line arguments</li> <li>environment variables</li> <li>json config file</li> <li>via the user interface</li> </ol> <p>By default, P2G looks for a file named <code>configuration.local.json</code> in the same directory where it is run.</p> <p>Tip</p> <p>You can override where the config Directory is mounted in the docker container by setting the environment vairable <code>P2G_CONFIG_DIRECTORY</code>.  P2G will expect to find a <code>configuration.local.json</code> file in the specified directory.</p>"},{"location":"configuration/#config-precedence","title":"Config Precedence","text":"<p>The following defines the precedence in which config definitions are honored. With the first items having higher precendence than the next items.</p> <ol> <li>Command Line</li> <li>Environment Variables</li> <li>Config File</li> </ol> <p>For example, if you defined your Peloton credentials ONLY in the Config file, then the Config file credentials will be used.</p> <p>If you defined your credentials in both the Config file AND the Environment variables, then the Environment variable credentials will be used.</p> <p>If you defined credentials using all 3 methods (config file, env, and command line), then the credentials provided via the command line will be used.</p>"},{"location":"configuration/#command-line-configuration","title":"Command Line Configuration","text":"<p>All of the values defined in the Json config file can also be defined as command line arguments. This functionality is provided by the default dotnet IConfiguration interface.</p>"},{"location":"configuration/#environment-variable-configuration","title":"Environment Variable Configuration","text":"<p>All of the values defined in the Json config file can also be defined as environment variables. This functionality is provided by the default dotnet IConfiguration interface.</p> <p>The variables use the following convention, note the use of both single and double underscores:</p> <pre><code>P2G_CONFIGSECTION__CONFIGPROPERTY=value\n</code></pre>"},{"location":"configuration/#example-app-config","title":"Example App Config","text":"<pre><code>P2G_APP__WORKINGDIRECTORY\nP2G_APP__ENABLEPOLLING\nP2G_APP__POLLINGINTERVALSECONDS\nP2G_APP__PYTHONANDGUPLOADINSTALLED\n</code></pre>"},{"location":"configuration/#example-arrays","title":"Example Arrays","text":"<pre><code>P2G_PELOTON__EXCLUDEWORKOUTTYPES__0=\"meditation\"\nP2G_PELOTON__EXCLUDEWORKOUTTYPES__1=\"stretching\"\nP2G_PELOTON__EXCLUDEWORKOUTTYPES__2=\"yoga\"\n...and so on\n</code></pre>"},{"location":"configuration/#example-nested-sections","title":"Example Nested Sections","text":"<p>For nested config sections, continue to use the same naming convention of defining the entire json path using <code>__</code> double underscores, and 0 based indexing for array values.</p> <pre><code>P2G_OBSERVABILITY__SERILOG__WRITETO__0__NAME=\"File\"\n</code></pre>"},{"location":"configuration/#additional-environment-variables","title":"Additional Environment Variables","text":"<p>In addition to overriding config values, the following extra environment variables are also supported.</p> ENV Variable Required Default Description <code>P2G_CONFIG_DIRECTORY</code> false P2G Directory Tells P2G where to look for the <code>configuration.local.json</code> file"},{"location":"configuration/api/","title":"API File Configuration","text":"<p>Tip</p> <p>These settings only apply if you are running an Instance of the API.  P2G provides some recommended config files to get you started.</p> <p>Some lower level configuration cannot be provided via the web user interface and can only be provided by config file.</p> <p>The Api looks for a file named <code>configuration.local.json</code> in the same directory where it is run.  Below is an example of the structure of this config file.</p> <pre><code>{\n  \"Api\": { /** (1)! **/ }, \n  \"Observability\": { /** (2)! **/ }\n}\n</code></pre> <ol> <li>Jump to Api Config Documentation</li> <li>Go to Observability Config Documentation</li> </ol>"},{"location":"configuration/api/#api-config","title":"Api Config","text":"<p>Warning</p> <p>Most people should not need to change this setting.</p> <pre><code>  \"Api\": {\n        \"HostUrl\": \"http://*:8080\"\n      }\n</code></pre> Field Required Default UI Setting Location Description HostUrl no <code>http://localhost:8080</code> none The host and port the WebUI should bind to and listen on."},{"location":"configuration/app/","title":"App Settings","text":"<p>The App Settings provide global settings for the P2G application.</p>"},{"location":"configuration/app/#settings-location","title":"Settings location","text":"Run Method Location Web UI UI &gt; Settings &gt; App Tab Windows Exe UI &gt; Settings &gt; App Tab GitHubAction Config Section in Workflow Headless (Docker or Console) Config section in <code>configuration.local.json</code>"},{"location":"configuration/app/#file-configuration","title":"File Configuration","text":"<pre><code> \"App\": {\n    \"EnablePolling\": true,\n    \"PollingIntervalSeconds\": 86400,\n    \"CheckForUpdates\": true,\n    \"CloseConsoleOnFinish\": false\n  }\n</code></pre>"},{"location":"configuration/app/#settings-overview","title":"Settings Overview","text":"Field Required Default Description EnablePolling no <code>true</code> <code>true</code> if you wish P2G to run continuously and poll Peloton for new workouts. PollingIntervalSeconds no 86400 The polling interval in seconds determines how frequently P2G should check for new workouts. Be warned, that setting this to a frequency of hourly or less may get you flagged by Peloton as a bad actor and they may reset your password. The default is set to Daily. CheckForUpdates no <code>true</code> <code>true</code> if P2G should check for updates and write a log message if a new release is available. If using the UI this message will display there as well. CloseConsoleOnFinish no <code>false</code> <code>true</code> if P2G should immediately exit after completing its run. This setting only applies if you are using Console Client / Docker Headless version of P2G."},{"location":"configuration/exercise-types/","title":"Exercise Types","text":"<pre><code>  BikeBootcamp\n  Cardio\n  Circuit\n  Cycling\n  Meditation\n  OutdoorCycling\n  OutdoorRunning\n  OutdoorWalking\n  Rowing\n  Strength\n  Stretching\n  TreadmillRunning \n  TreadmillWalking\n  Yoga\n</code></pre>"},{"location":"configuration/format/","title":"Format Settings","text":"<p>The Format Settings provide settings related to how workouts should be converted from Peloton.</p>"},{"location":"configuration/format/#settings-location","title":"Settings location","text":"Run Method Location Web UI UI &gt; Settings &gt; Conversion Tab Windows Exe UI &gt; Settings &gt; Conversion Tab GitHubAction Config Section in Workflow Headless (Docker or Console) Config section in <code>configuration.local.json</code>"},{"location":"configuration/format/#file-configuration","title":"File Configuration","text":"<pre><code>\"Format\": {\n    \"Fit\": true,\n    \"Json\": false,\n    \"Tcx\": false,\n    \"SaveLocalCopy\": false,\n    \"IncldudeTimeInHRZones\": false,\n    \"IncludeTimeInPowerZones\": false,\n    \"DeviceInfoSettings\": { /**(1)!**/ }\n    \"Cycling\": {\n      \"PreferredLapType\": \"Class_Targets\"\n    },\n    \"Running\": {\n      \"PreferredLapType\": \"Distance\"\n    },\n    \"Rowing\": {\n      \"PreferredLapType\": \"Class_Segments\"\n    },\n    \"Strength\": {\n      \"DefaultSecondsPerRep\": 3\n    },\n    \"WorkoutTitleTemplate\": \"{{PelotonWorkoutTitle}} with {{PelotonInstructorName}}\",\n    \"StackedWorkouts\": { /**(2)!**/  }\n  }\n</code></pre> <ol> <li>Jump to Device Info Settings Documentation</li> <li>Jump to StackedWorkouts Documentation</li> </ol>"},{"location":"configuration/format/#settings-overview","title":"Settings Overview","text":"Field Required Default Description Fit no <code>false</code> <code>true</code> indicates you wish downloaded workouts to be converted to FIT Json no <code>false</code> <code>true</code> indicates you wish downloaded workouts to be converted to JSON. This will automatically save a local copy when enabled. Tcx no <code>false</code> <code>true</code> indicates you wish downloaded workouts to be converted to TCX SaveLocalCopy no <code>false</code> <code>true</code> will save any converted workouts to the output directory. IncludeTimeInHRZones no <code>false</code> Only use this if you are unable to configure your Max HR on Garmin Connect. When set to True, P2G will attempt to capture the time spent in each HR Zone per the data returned by Peloton. See understanding P2G provided zones. IncludePowerInHRZones no <code>false</code> Only use this if you are unable to configure your FTP and Power Zones on Garmin Connect. When set to True, P2G will attempt to capture the time spent in each Power Zone per the data returned by Peloton. See understanding P2G provided zones. DeviceInfoSettings no <code>null</code> See customizing the Garmin device associated with the workout. Cycling no <code>null</code> Configuration specific to Cycling workouts. Cycling.PreferredLapType no <code>Default</code> The preferred lap type to use. Running no <code>null</code> Configuration specific to Running workouts. Running.PreferredLapType no <code>Default</code> The preferred lap type to use. Rowing no <code>null</code> Configuration specific to Rowing workouts. Rowing.PreferredLapType no <code>Default</code> The preferred lap type to use. Strength no <code>null</code> Configuration specific to Strength workouts. Strength.DefaultSecondsPerRep no <code>3</code> For exercises that are done for time instead of reps, P2G can estimate how many reps you completed using this value. Ex. If <code>DefaultSecondsPerRep=3</code> and you do Curls for 15s, P2G will estimate you completed 5 reps. WorkoutTitleTemplate no <code>{{PelotonWorkoutTitle}} with {{PelotonInstructorName}}</code> Customize the workout title shown in Garmin Connect. Read More... StackedWorkouts no <code>disabled</code> Enable/disable workout stacking. Read More..."},{"location":"configuration/format/#understanding-p2g-provided-zones","title":"Understanding P2G Provided Zones","text":"<p>Danger</p> <p>If either custom zone setting is enable it is possible Garmin will not calculate Training Load, Effect, V02 Max, or related fields.  Use these settings with caution.</p> <p>Garmin Connect expects that users have a registered device and they expect users have set up their HR and Power Zones on that device. However, this presents a problem if you either:</p> <ul> <li>A) do not have a device capable of tracking Power</li> <li>B) do not have a Garmin device at all.</li> </ul> <p>The most common scenario for Peloton users is scenario <code>A</code>, where they do not own a Power capable Garmin device and therefore are not able to configure their Power Zones in Garmin Connect.  If you do not have Power or HR zones configured in Garmin Connect then you are not able to view accurate <code>Time In Zones</code> charts for a given workout.</p> <p>P2G provides a work around for this by optionally enriching the workout with the <code>Time In Zones</code> data with one caveat: the chart will not display the range value for the zone.</p> <p></p> <p>This is only available when generating and uploading the FIT format.</p>"},{"location":"configuration/format/#customizing-the-garmin-device-associated-with-the-workout","title":"Customizing the Garmin Device Associated with the workout","text":"<p>Workouts uploaded to Garmin Connect must report what device they were recorded on.  The device chosen impacts what additional data fields are calculated and shown by Garmin.</p> <p>For example, the device a workout is recorded on can impact:</p> <ol> <li>Whether or not the workout will count towards Challenges and Badges</li> <li>Whether or not Garmin will calculate things like TSS, TE, Load, and VO2 Max</li> </ol> <p>For this reason, P2G provides reasonable defaults to ensure users get the most data possible on their workouts out of the box.</p> <p>If you choose to customize what devices are used by P2G you can do that either via the ui or via config file.</p>"},{"location":"configuration/format/#p2g-default-devices","title":"P2G Default Devices","text":"Exercise Type Default Device Used Default Forerunner 945 Cycling Taxc Training App Windows Rowing Epix"},{"location":"configuration/format/#configuring-device-info-via-the-ui","title":"Configuring Device Info via the UI","text":"<p>Under <code>Settings &gt; Conversion &gt; Advanced &gt; Device Info Settings</code> you can see which devices will be used for each Exercise Type.  You can modify this list to suit your needs.</p> <p>The <code>None</code> Exercise Type serves as a global default used for any Exercise Type not configured.</p> <p>Learn more about finding Device Info to use.</p>"},{"location":"configuration/format/#configuring-device-info-via-config-file","title":"Configuring Device Info via Config File","text":"<p>This config section allows you to specificy a Device per Exercise Type.  The <code>None</code> Exercise Type serves as a global default used for any Exercise Type not configured.</p> <p>Learn more about finding Device Info to use.</p> <pre><code>\"DeviceInfoSettings\": {\n        \"none\": {\n          \"name\": \"Forerunner 945\",\n          \"unitId\": 1,\n          \"productID\": 3113,\n          \"manufacturerId\": 1,\n          \"version\": {\n            \"versionMajor\": 19,\n            \"versionMinor\": 2.0,\n            \"buildMajor\": 0,\n            \"buildMinor\": 0.0\n          }\n        },\n        \"cycling\": {\n          \"name\": \"TacxTrainingAppWin\",\n          \"unitId\": 1,\n          \"productID\": 20533,\n          \"manufacturerId\": 89,\n          \"version\": {\n            \"versionMajor\": 1,\n            \"versionMinor\": 30.0,\n            \"buildMajor\": 0,\n            \"buildMinor\": 0.0\n          }\n        },\n        \"rowing\": {\n          \"name\": \"Epix\",\n          \"unitId\": 3413684246,\n          \"productID\": 3943,\n          \"manufacturerId\": 1,\n          \"version\": {\n            \"versionMajor\": 10,\n            \"versionMinor\": 43.0,\n            \"buildMajor\": 0,\n            \"buildMinor\": 0.0\n          }\n        }\n      }\n</code></pre>"},{"location":"configuration/format/#discovering-garmin-devices","title":"Discovering Garmin Devices","text":"<p>You can find the Device Information for any previous workouts you have uploaded by following the below steps:</p> <ol> <li>Get your Garmin current device info<ol> <li>Log on to Garmin connect and find an activity you recorded with your device</li> <li>In the upper right hand corner of the activity, click the gear icon and choose <code>Export to TCX</code></li> <li>A TCX file will be downloaded to your computer</li> </ol> </li> <li>Find the TCX file you downloaded in part 1 and open it in any text editor.<ol> <li>Use <code>ctrl-f</code> (<code>cmd-f</code> on mac) to find the <code>&lt;Creator</code> section in the file, it will look similar to the sample device info below.</li> </ol> </li> <li>Use the values found in this section to Configure your custom device in P2G either via config file or the ui</li> </ol> <pre><code>&lt;Creator&gt;\n  &lt;Name&gt;Garmin Sample Device - please create from exported TCX file&lt;/Name&gt;\n  &lt;UnitId&gt;00000000000&lt;/UnitId&gt;\n  &lt;ProductID&gt;0000&lt;/ProductID&gt;\n  &lt;Version&gt;\n    &lt;VersionMajor&gt;0&lt;/VersionMajor&gt;\n    &lt;VersionMinor&gt;0&lt;/VersionMinor&gt;\n    &lt;BuildMajor&gt;0&lt;/BuildMajor&gt;\n    &lt;BuildMinor&gt;0&lt;/BuildMinor&gt;\n  &lt;/Version&gt;\n&lt;/Creator&gt;\n</code></pre>"},{"location":"configuration/format/#lap-types","title":"Lap Types","text":"<p>P2G supports several different strategies for creating Laps in Garmin Connect.  If a certain strategy is not available P2G will attempt to fallback to a different strategy.  You can override this behavior by specifying your preferred Lap type in the config. When <code>PreferredLapType</code> is set, P2G will first attempt to generate your preferred type and then fall back to the default behavior if it is unable to.  By default P2G will:</p> <ol> <li>First try to create laps based on <code>Class_Targets</code></li> <li>Then try to create laps based on <code>Class_Segments</code></li> <li>Finally fallback to create laps based on <code>Distance</code></li> </ol> Strategy Config Value Description Class Targets <code>Class_Targets</code> If the Peloton data includes Target Cadence information, then laps will be created to match any time the Target Cadence changed.  You must use this strategy if you want the Target Cadence to show up in Garmin on the Cadence chart. Class Segments <code>Class_Segments</code> If the Peloton data includes Class Segment information, then laps will be created to match each segment: Warm Up, Cycling, Weights, Cool Down, etc. Distance <code>Distance</code> P2G will caclulate Laps based on distance for each 1mi, 1km, or 500m (for Row only) based on your distance setting in Peloton."},{"location":"configuration/format/#workout-title-templating","title":"Workout Title Templating","text":"<p>P2G allows some limited customization of the title that will be used on the workout imported to Garmin.</p> <p>By default the title is structured like:</p> <pre><code>10min HITT Ride with Ally Love\n</code></pre>"},{"location":"configuration/format/#customizing-the-title","title":"Customizing the Title","text":"<p>Title customization is provided via \"templating\", which allows you to provide a template that P2G should follow when constructing a workout title.  The specific templating syntax P2G supports is Handlebars.</p> <p>The below data fields are available for use in the template:</p> <ul> <li><code>PelotonWorkoutTitle</code> - Peloton provides this usually in the form of \"10 min HITT Ride\"</li> <li><code>PelotonInstructorName</code> - Peloton provides this as the full instructors name: \"Ally Love\"</li> </ul> <p>These can be used to build a template like so:</p> <pre><code>{{PelotonWorkoutTitle}}{{#if PelotonInstructorName}} with {{PelotonInstructorName}}{{/if}}\n</code></pre> <p>The above template will always start with the Peloton workout title.  IF the workout has Instructor information, then the template will add <code>with Instructor</code> after the workout title.</p> <p>Some characters are not allowed to be used in the workout titles. If you use an unsupported character then it will automatically be replaced with a dash (<code>-</code>).</p> <p>Additionally, Garmin has a limit on how long a title will be. If the title exceeds this limit (~45 characters) then the title will be truncated.</p> <p>Note:</p> <p>For this setting to take effect, your Garmin Connect account must be set to allow custom workout names.  In the Garmin Connect web interface click on the user icon in the top right, select <code>Account Settings</code> then <code>Display Preferences</code> (shortcut). Change the <code>Activity Name</code> setting to <code>Workout Name (when available)</code>.  This will allow the custom workout name to sync, and should still allow the standard behavior when syncing non-P2G activities directly.</p>"},{"location":"configuration/format/#stacked-workouts","title":"Stacked Workouts","text":"<p>On Peloton, you can build \"workout stacks\" which allow you to seamlessly ride straight through several back to back classes for a longer overall workout.  By default, P2G will upload each of the stacked classes as an individual workout to Garmin.  There are a few drawbacks to this approach:</p> <ol> <li>Badges - You won't be able to earn certain Badges for duration since Garmin expects you to hit the goal duration within a single activity</li> <li>Workout Plans - You may not get credit towards your Workout Plan also because Garmin expects the goal to be met within a single activity file</li> <li>TE/TSS/VO2 - These metrics may not be accurately reflected because the overall combined duration is not accounted for by Garmin</li> </ol> <p>In order to address the above, P2G provides the option to combine stacked workouts into a single activity file that will be uploaded to Garmin.</p> <p>There are two main ways to use this feature:</p> <ol> <li>Manual Stacking</li> <li>Automatic Stacking</li> </ol>"},{"location":"configuration/format/#manual-stacking","title":"Manual Stacking","text":"<p>Manual Stacking refers to you explicitly choosing a list of workouts that you would like combined.  You can only do this from the UI on the <code>Sync</code> page.</p> <ol> <li>Select the workouts you would like combined, ensure they are all of the same Workout Type</li> <li>Enable the <code>Stack Workouts</code> toggle at the top of the page</li> <li>Click Sync</li> </ol> <p>It is important to note that when manually stacking workouts P2G does not honor any configured <code>StackedWorkouts</code> settings, this means that if you selected two workouts that were several hours a part, P2G will stack them.</p>"},{"location":"configuration/format/#automatic-stacking","title":"Automatic Stacking","text":"<p>Automatic stacking is where P2G always attempts to detect if workouts should be combined and then combines them for you.</p> <p>In order for a set of workouts to be automatically stacked the following must be true:</p> <ol> <li>Automatic Stacking is enabled in P2G Settings</li> <li>All the workouts are of the same exercise type (i.e. all Cycling or all Strength)</li> <li>Each workout must start within X seconds of the previous workouts end time (configured in settings)</li> </ol>"},{"location":"configuration/format/#file-configuration_1","title":"File Configuration","text":"<pre><code>\"StackedWorkouts\": {\n        \"AutomaticallyStackWorkouts\": true,\n        \"MaxAllowedGapSeconds\": 300\n      }\n</code></pre> Field Required Default Description AutomaticallyStackWorkouts no <code>false</code> <code>true</code> indicates P2G should automatically detect stacked workouts and combine them MaxAllowedGapSeconds no <code>300</code> When <code>AutomaticallyStackWorkouts</code> is enabled, P2G will use this value to detect workouts that should be combined.  For example, a value of 300 means that any workout starting within 300s (or 5min) of the previous workout should be considered \"stacked\". <p>If you use the UI, then you should see similar options available to you on the Conversion Settings page.</p>"},{"location":"configuration/garmin/","title":"Garmin Settngs","text":"<p>This Garmin Settings provide settings related to uploading workouts to Garmin.</p>"},{"location":"configuration/garmin/#settings-location","title":"Settings location","text":"Run Method Location Web UI UI &gt; Settings &gt; Garmin Tab Windows Exe UI &gt; Settings &gt; Garmin Tab GitHubAction Config Section in Workflow Headless (Docker or Console) Config section in <code>configuration.local.json</code>"},{"location":"configuration/garmin/#file-configuration","title":"File Configuration","text":"<pre><code>\"Garmin\": {\n    \"Email\": \"garmin@gmail.com\",\n    \"Password\": \"garmin\",\n    \"TwoStepVerificationEnabled\": false,\n    \"Upload\": false,\n    \"FormatToUpload\": \"fit\",\n    \"api\": {\n      \"ssoSignInUrl\": \"https://sso.garmin.com/sso/signin\",\n      \"ssoEmbedUrl\": \"https://sso.garmin.com/sso/embed\",\n      \"ssoMfaCodeUrl\": \"https://sso.garmin.com/sso/verifyMFA/loginEnterMfaCode\",\n      \"ssoUserAgent\": \"GCM-iOS-5.7.2.1\",\n      \"oAuth1TokenUrl\": \"https://connectapi.garmin.com/oauth-service/oauth/preauthorized\",\n      \"oAuth1LoginUrlParam\": \"https://sso.garmin.com/sso/embed&amp;accepts-mfa-tokens=true\",\n      \"oAuth2RequestUrl\": \"https://connectapi.garmin.com/oauth-service/oauth/exchange/user/2.0\",\n      \"uploadActivityUrl\": \"https://connectapi.garmin.com/upload-service/upload\",\n      \"uploadActivityUserAgent\": \"GCM-iOS-5.7.2.1\",\n      \"uplaodActivityNkHeader\": \"NT\",\n      \"origin\": \"https://sso.garmin.com\",\n      \"referer\": \"https://sso.garmin.com/sso/signin\"\n    }\n  }\n</code></pre> <p>Warning</p> <p>Console or Docker Headless: Your username and password for Peloton and Garmin Connect are stored in clear text, which is not secure. Please be aware of the risks.</p> <p>WebUI version 3.3.0+: Credentials are stored encrypted.</p> <p>Windows Exe version 4.0.0+: Credentials are stored encrypted.</p> <p>GitHub Actions: Credentials are stored encrypted.</p>"},{"location":"configuration/garmin/#settings-overview","title":"Settings Overview","text":"Field Required Default UI Setting Location Description Email yes - if Upload=true <code>null</code> <code>Garmin Tab</code> Your Garmin email used to sign in. Password yes - if Upload=true <code>null</code> <code>Garmin Tab</code> Your Garmin password used to sign in. Note: Does not support <code>\\</code> character in password TwoStepVerificationEnabled no <code>false</code> <code>Garmin Tab</code> Whether or not your Garmin account is protected by Two Step Verification Upload no <code>false</code> <code>Garmin Tab</code> <code>true</code> indicates you wish downloaded Peloton workouts to be uploaded to Garmin Connect. FormatToUpload no <code>fit</code> <code>Garmin Tab &gt; Advanced</code> Valid values are <code>fit</code> or <code>tcx</code>. Ensure the format you specify here is also enabled in your Format config Api no See sample above <code>Garmin Tab &gt; Advanced &gt; Garmin Api Settings</code> Configures how P2G communicates with the Garmin Api. Do not modify unless told to do so"},{"location":"configuration/observability/","title":"Observability File Configuration","text":"<p>Tip</p> <p>These are advanced settings for those who like to play around with Logs, Metrics, and Traces.</p>"},{"location":"configuration/observability/#overview","title":"Overview","text":"<p>P2G supports publishing Open Telemetry metrics. P2G publishes the following:</p> <ol> <li>Logs via Serilog. Logs can be sunk to a variety of sources including Console, File, ElasticSearch, and Grafana Loki.</li> <li>Metrics via Prometheus. Metrics are exposed on a standard <code>/metrics</code> endpoint and the port is configurable.</li> <li>Traces via Jaeger. Traces can be collected via an agent of your choice. Some options include Jaeger Agent/Jaeger Query, or Grafana Tempo.</li> <li>P2G also provides a sample Grafana dashboard which can be found in the repository.</li> </ol> <p>The grafana dashboard assumes you have the following datasources setup but can be easily modified to meet your needs:</p> <ol> <li>Prometheus</li> <li>Loki</li> <li>If running as a docker image a docker metrics exporter</li> </ol> <p></p>"},{"location":"configuration/observability/#observability-config","title":"Observability Config","text":"<p>P2G looks for a file named <code>configuration.local.json</code> in the same directory where it is run.  Within this file, P2G supports configuring an <code>Observability</code> section, as seen below.</p> <pre><code>\"Observability\": {\n\n    \"Prometheus\": { /**(1)!**/ }, // Metrics\n    \"Jaeger\": { /**(2)!**/ }, // Traces\n    \"Serilog\": { /**(3)!**/ } // Logs\n  }\n</code></pre> <ol> <li>Jump to Prometheus Config Documentation</li> <li>Jump to Jaeger Config Documentation</li> <li>Jump to Serilog Config Documentation</li> </ol>"},{"location":"configuration/observability/#prometheus-config","title":"Prometheus Config","text":"<pre><code>\"Prometheus\": {\n      \"Enabled\": false,\n      \"Port\": 4000\n    }\n</code></pre> Field Required Default Description Enabled no <code>false</code> Whether or not to expose metrics. Metrics will be available at <code>http://localhost:{port}/metrics</code> Port no <code>80</code> The port the metrics endpoint should be served on. Only valid for Console mode, not Api/WebUI <p>Tip</p> <p>If you are using Docker, ensure you have exposed the port from your container.</p>"},{"location":"configuration/observability/#example-prometheus-scraper-config","title":"Example Prometheus scraper config","text":"<pre><code>- job_name: 'p2g'\n    scrape_interval: 60s\n    static_configs:\n      - targets: [&lt;p2gIPaddress&gt;:&lt;p2gPort&gt;]\n    tls_config:\n      insecure_skip_verify: true\n</code></pre>"},{"location":"configuration/observability/#jaeger-config","title":"Jaeger Config","text":"<pre><code>\"Jaeger\": {\n      \"Enabled\": false,\n      \"AgentHost\": \"localhost\",\n      \"AgentPort\": 6831\n    }\n</code></pre> Field Required Default Description Enabled no <code>false</code> Whether or not to generate traces. AgentHost yes - if Enalbed=true <code>null</code> The host address for your trace collector. AgentPort yes - if Enabled=true <code>null</code> The port for your trace collector."},{"location":"configuration/observability/#serilog-config","title":"Serilog Config","text":"<pre><code>\"Serilog\": {\n      \"Using\": [ \"Serilog.Sinks.Console\", \"Serilog.Sinks.File\", \"Serilog.Sinks.Grafana.Loki\" ],\n      \"MinimumLevel\": {\n        \"Default\": \"Information\",\n        \"Override\": {\n          \"Microsoft\": \"Error\",\n          \"System\": \"Error\"\n        }\n      },\n      \"WriteTo\": [\n        { \"Name\": \"Console\" },\n        {\n          \"Name\": \"File\",\n          \"Args\": {\n            \"path\": \"./output/log.txt\",\n            \"rollingInterval\": \"Day\",\n            \"retainedFileCountLimit\": 7\n          }\n        },\n        {\n          \"Name\": \"GrafanaLoki\",\n          \"Args\": {\n            \"uri\": \"http://192.168.1.95:3100\",\n            \"textFormatter\": \"Serilog.Sinks.Grafana.Loki.LokiJsonTextFormatter, Serilog.Sinks.Grafana.Loki\",\n            \"labels\": [\n              {\n                \"key\": \"app\",\n                \"value\": \"p2g\"\n              }\n            ]\n          }\n        }]\n}\n</code></pre> Field Required Default Description Using no <code>null</code> A list of sinks you would like use. The valid sinks are listed in the examplea above. MinimumLevel no <code>null</code> The minimum level to write. <code>[Verbose, Debug, Information, Warning, Error, Fatal]</code> WriteTo no <code>null</code> Additional config for various sinks you are writing to. <p>More detailed information about configuring Logging can be found on the Serilog Config Repo.</p>"},{"location":"configuration/peloton/","title":"Peloton Settings","text":"<p>The Peloton Settings provide settings related to how P2G should fetch workouts from Peloton.</p>"},{"location":"configuration/peloton/#settings-location","title":"Settings location","text":"Run Method Location Web UI UI &gt; Settings &gt; Peloton Tab Windows Exe UI &gt; Settings &gt; Peloton Tab GitHubAction Config Section in Workflow Headless (Docker or Console) Config section in <code>configuration.local.json</code>"},{"location":"configuration/peloton/#file-configuration","title":"File Configuration","text":"<pre><code>\"Peloton\": {\n    \"Email\": \"peloton@gmail.com\",\n    \"Password\": \"peloton\",\n    \"NumWorkoutsToDownload\": 1,\n    \"ExcludeWorkoutTypes\": [ \"meditation\" ]\n  }\n</code></pre> <p>Warning</p> <p>Console or Docker Headless: Your username and password for Peloton and Garmin Connect are stored in clear text, which is not secure. Please be aware of the risks.</p> <p>WebUI version 3.3.0+: Credentials are stored encrypted.</p> <p>Windows Exe version 4.0.0+: Credentials are stored encrypted.</p> <p>GitHub Actions: Credentials are stored encrypted.</p>"},{"location":"configuration/peloton/#settings-overview","title":"Settings Overview","text":"Field Required Default Description Email yes <code>null</code> Your Peloton email used to sign in Password yes <code>null</code> Your Peloton password used to sign in. Note: Does not support <code>\\</code> character in password NumWorkoutsToDownload no 5 The default number of workouts to download. See choosing number of workouts to download.  Set this to <code>0</code> if you would like P2G to prompt you each time for a number to download. ExcludeWorkoutTypes no none An array of workout types that you do not want P2G to download/convert/upload. Read more... Advanced Config no N/A Read more..."},{"location":"configuration/peloton/#choosing-number-of-workouts-to-download","title":"Choosing Number of Workouts To Download","text":"<p>When choosing the number of workouts P2G should download each polling cycle its important to keep your configured Polling Interval in mind. If, for example, your polling interval is set to hourly, then you may want to set <code>NumWorkoutsToDownload</code> to 4 or greater. This ensures if you did four 15min workouts during that hour they would all be captured.</p> <p>Garmin is capable of rejecting duplicate workouts, so it is safe for P2G to attempt to sync a workout that may have been previously synced.</p>"},{"location":"configuration/peloton/#exclude-workout-types","title":"Exclude Workout Types","text":"<p>If there are Exercise Types that you do not want P2G to sync, then you can specify those in the settings.</p> <p>Some example use cases include:</p> <ol> <li>You take a wide variety of Peloton classes, including meditation and you want to skip uploading meditation classes.</li> <li>You want to avoid double-counting activities you already track directly on a Garmin device, such as outdoor running workouts.</li> </ol> <p>The list of valid values are any Exercise Type.</p>"},{"location":"configuration/peloton/#advanced-api-configuration","title":"Advanced API Configuration","text":"<p>In general you should not need to modify these settings unless specifically recommended to do so.</p> <pre><code>\"Peloton\": {\n    ...Existing config options...\n    \"BearerToken\": \"\",\n    \"Api\": {\n        \"ApiUrl\": \"https://api.onepeloton.com/\",\n        \"AuthDomain\": \"auth.onepeloton.com\",\n        \"AuthClientId\": \"WVoJxVDdPoFx4RNewvvg6ch2mZ7bwnsM\",\n        \"AuthAudience\": \"https://api.onepeloton.com/\",\n        \"AuthScope\": \"offline_access openid peloton-api.members:default\",\n        \"AuthRedirectUri\": \"https://members.onepeloton.com/callback\",\n        \"Auth0ClientPayload\": \"eyJuYW1lIjoiYXV0aDAuanMtdWxwIiwidmVyc2lvbiI6IjkuMTQuMyJ9\",\n        \"AuthAuthorizePath\": \"/authorize\",\n        \"AuthTokenPath\": \"/oauth/token\",\n        \"BearerTokenDefaultTtlSeconds\": 172800,\n    }\n  },\n</code></pre>"},{"location":"configuration/peloton/#peloton-bearer-token","title":"Peloton Bearer Token","text":"<p>In the event P2G is not able to authenticate with Peloton, this configuration field can be used as a fallback option.  If you set this option then P2G will bypass authenticating with Peloton and use the provided BearerToken to authenticate requests.</p> <p>Quick, not great instructions on how to locate a Bearer Token:</p> <ol> <li>Go to Peloton website and login</li> <li>Hit F12 on your keyboard, this should open the Developer Console</li> <li>Look for a Network tab</li> <li>Refresh the web page, this should cause new traffic to populate in the Network tab</li> <li>Look for any item that has domain <code>api.peloton.com</code> and single click it</li> <li>This will open a details pane for that request</li> <li>Look for the <code>Headers</code> tab in the details pane, then look for a Header called <code>Authorization: Bearer aIdlkjf....</code></li> <li>Copy all of the text AFTER the word <code>Bearer</code></li> <li>Save that copied text into your P2G config</li> </ol> <p>Saving the Bearer Token in the config file and restarting P2G will cause P2G to use that token for authentication, bypassing the need to \"login\".</p> <p>You will need to manually update this token every time it expires which will be roughly every 48hrs.  In order to stop using the token, simply delete <code>\"BearerToken\": \"...\"</code> from your config file and restart P2G.</p> <p>Note</p> <p>Windows users and Web UI users, your config file is found in <code>&lt;Your P2G Folder&gt;/data/SettingsDb.json</code>.  Quit P2G, edit this file, then start P2G again.</p> <p>Danger</p> <p>BearerToken is like a password and should never be shared. Github action users should set BearerToken as a secret similar to how you configure Email and Password.</p> <p>Warning</p> <p>TODO: Better instructions and the ability to edit this from UI</p>"},{"location":"configuration/webui/","title":"Web UI File Configuration","text":"<p>Tip</p> <p>These settings only apply if you are running an Instance of the Web UI.  P2G provides some recommended config files to get you started.</p> <p>Some lower level configuration cannot be provided via the web user interface and can only be provided by config file.</p> <p>The Web UI looks for a file named <code>configuration.local.json</code> in the same directory where it is run.  Below is an example of the structure of this config file.</p> <pre><code>{\n  \"Api\": { /** (1)! **/ }, \n  \"WebUI\": { /** (2)! **/ },\n  \"Observability\": { /** (3)! **/ }\n}\n</code></pre> <ol> <li>Jump to Api Config Documentation</li> <li>Jump to Web UI Config Documentation</li> <li>Go to Observability Config Documentation</li> </ol>"},{"location":"configuration/webui/#api-config","title":"Api Config","text":"<p>This section helps inform the Web UI where to find the P2G Api.</p> <pre><code> \"Api\": {\n      \"HostUrl\": \"http://p2g-api:8080\"\n    }\n</code></pre> Field Required Default UI Setting Location Description HostUrl yes <code>null</code> none The host and port for the Web UI to communicate with the Api."},{"location":"configuration/webui/#web-ui-config","title":"Web UI Config","text":"<p>Warning</p> <p>Optional - most users should not need to change this setting.</p> <pre><code> \"WebUI\": {\n      \"HostUrl\": \"http://*:8080\"\n    }\n</code></pre> Field Required Default UI Setting Location Description HostUrl no <code>http://localhost:8080</code> none The host and port the WebUI should bind to and listen on."},{"location":"install/","title":"Install","text":"<p>P2G can be run on all major operating systems.</p>"},{"location":"install/#start-here-to-explore-install-options","title":"\ud83d\udc4b Start here to explore install options","text":"Operating System Supports Garmin 2-Step Verification Supports Automatic Sync Windows yes no Mac yes yes Linux yes yes I don't want to install anything no yes"},{"location":"install/#windows-quick-start","title":"Windows Quick Start","text":"<ol> <li>Windows Application - recommended unless you are comfortable with Docker on Windows</li> <li>Docker</li> <li>Build from Source</li> </ol>"},{"location":"install/#mac-quick-start","title":"Mac Quick Start","text":"<ol> <li>Docker</li> <li>Build from Source</li> </ol>"},{"location":"install/#linux-quick-start","title":"Linux Quick Start","text":"<ol> <li>Docker - recommended</li> <li>Build from Source</li> </ol>"},{"location":"install/#github-actions","title":"GitHub Actions","text":"<p>If you would rather not install anything on your computer, you can run P2G using a feature called <code>GitHub Actions</code>, this will require you to create an account on <code>GitHub</code>.  Additionally, your Garmin account must not have Two Step Verification enabled.</p> <ol> <li>GitHub Actions</li> </ol>"},{"location":"install/docker-headless/","title":"Docker Headless","text":"<p>This flavor of P2G runs without any user interface and relies on configuration from <code>configuration.local.json</code> file.</p> <p>DockerHub</p> <pre><code>docker run -i -v /full/path/to/configuration.local.json:/app/configuration.local.json -v /full/path/to/output:/app/output philosowaffle/peloton-to-garmin:stable\n</code></pre> <p>GitHub Package</p> <pre><code>docker run -i -v /full/path/to/configuration.local.json:/app/configuration.local.json -v /full/path/to/output:/app/output ghcr.io/philosowaffle/peloton-to-garmin:stable\n</code></pre>"},{"location":"install/docker-headless/#docker-compose","title":"docker-compose","text":"<p>Pre-requisite: You have either <code>docker-compose</code> or <code>Docker Desktop</code> installed This method does not work with Garmin accounts protected by Two Step Verification</p> <ol> <li>Create a directory <code>p2g-headless</code><ol> <li>Inside this folder create a docker-compose.yaml file in the directory</li> <li>Within this same directory, also create a folder called <code>config</code><ol> <li>Inside the <code>config</code> folder create the configuration.local.json.</li> </ol> </li> <li>Edit the configuration file to use your Peloton and Garmin credentials</li> </ol> </li> <li>Open a terminal in this folder</li> <li>Run: <code>docker-compose pull &amp;&amp; docker-compose up -d</code></li> </ol> <p>Any logs or generated files will be available in the <code>output</code> directory.  Additionally, you can learn more about customizing your configuration over in the Configuration Section</p>"},{"location":"install/docker-headless/#to-stop-p2g","title":"To stop P2G","text":"<ol> <li>You can use Docker Desktop application to kill the containers</li> <li>Or, you can open a terminal in the <code>p2g-headless</code> folder<ol> <li>Run: <code>docker-compose down</code></li> </ol> </li> </ol>"},{"location":"install/docker-headless/#to-update-p2g","title":"To update P2G","text":"<ol> <li>Open a terminal in the <code>p2g-headless</code> folder<ol> <li>Run: <code>docker-compose pull &amp;&amp; docker-compose up -d</code></li> </ol> </li> </ol>"},{"location":"install/docker-headless/#prometheus","title":"Prometheus","text":"<p>If you configure P2G to serve Prometheus metrics then you will also need to map the corresponding port for your docker container. By default, Prometheus metrics will be served on port <code>4000</code>. You can learn more about P2G and Prometheus in the Observability Configuration section.</p>"},{"location":"install/docker-webui/","title":"Docker - Web UI","text":"<p>P2G provides a website user interface. Some key features include:</p> <ol> <li>Configure your settings via a user interface</li> <li>Trigger a sync from any browser (your computer, your phone, etc.)</li> <li>Sync service can still run in the background, syncing periodically</li> <li>OpenApi for custom scripts and workflows</li> </ol> <p></p>"},{"location":"install/docker-webui/#install","title":"\u2b07\ufe0f Install","text":"<p>Pre-requisite: You have either <code>docker-compose</code> or <code>Docker Desktop</code> installed</p> <ol> <li>Create a folder named <code>p2g-webui</code><ol> <li>Inside this folder create docker-compose.yaml</li> <li>Within this same directory, also create a folder called <code>config</code><ol> <li>Create two more folders within the <code>config</code> directory: <code>api</code> and <code>webui</code></li> <li>Within the <code>api</code> folder, create configuration.local.json</li> <li>Within the <code>webui</code> folder, also create a configuration.local.json with slightly different content</li> <li>Your final directory structure should look similar to this.</li> </ol> </li> </ol> </li> <li>Open a terminal in the <code>p2g-webui</code> folder</li> <li>Run: <code>docker compose pull &amp;&amp; docker compose up -d</code><ol> <li>This will pull the containers and start them up running in the background</li> <li>You can close the terminal at this time</li> </ol> </li> <li>Open a browser and navigate to <code>http://localhost:8002</code></li> </ol> <p>Any logs or generated files will be available in the <code>output</code> directory.  Additionally, you can learn more about customizing your configuration over in the Configuration Section</p>"},{"location":"install/docker-webui/#configuration","title":"Configuration","text":"<p>You can learn more about customizing your configuration over in the Configuration Section.</p> <p>If you are migrating to the Web UI for the first time you will need to reconfigure most of your settings using the user interface.  The only settings that are carried over and still configured via the configuration file are the ones related to <code>Observability</code>.</p>"},{"location":"install/docker-webui/#to-stop-p2g","title":"To stop P2G","text":"<ol> <li>You can use Docker Desktop application to kill the containers</li> <li>Or, you can open a terminal in the <code>p2g-webui</code> folder<ol> <li>Run: <code>docker compose down</code></li> </ol> </li> </ol>"},{"location":"install/docker-webui/#open-api","title":"Open Api","text":"<p>To access the Open API spec  for P2G you will need to expose port <code>8080</code> on the Api docker container.  The open API spec will be available at <code>http://localhost:8001/swagger</code>.</p>"},{"location":"install/docker-webui/#updating","title":"\u2b06\ufe0f Updating","text":"<ol> <li>Open a terminal in the <code>p2g-webui</code> folder<ol> <li>Run: <code>docker compose pull &amp;&amp; docker compose up -d</code></li> </ol> </li> </ol>"},{"location":"install/docker-webui/#uninstalling","title":"\u274c Uninstalling","text":"<ol> <li>You can use Docker Desktop application to kill the containers and delete the images</li> <li>Or, you can open a terminal in the <code>p2g-webui</code> folder<ol> <li>Run: <code>docker compose down &amp;&amp; docker compose rm</code></li> </ol> </li> <li>Finally, delete the <code>p2g-webui</code> folder</li> </ol> <p>Warning</p> <p>This is non-recoverable.  Any and all customizations will be lost.  You can re-install P2G again by starting over.</p>"},{"location":"install/docker-webui/#changing-versions","title":"#\ufe0f\u20e3 Changing Versions","text":"<ol> <li>Find the image tags you want from the releases page</li> <li>Update the docker-compose.yaml containers to reference those tags.</li> <li>Restart the containers<ol> <li>Run: <code>docker compose down &amp;&amp; docker compose up -d</code></li> </ol> </li> </ol> <p>Warning</p> <p>Attempting to use configuration or data from a later version of P2G with an older version is not guaranteed to work. You may need to reconfigure your instance.</p>"},{"location":"install/docker-webui/#multiple-users","title":"\ud83d\udc6a Multiple Users","text":"<p>To setup P2G for an additional user, simply download P2G run through the install process again in a new folder named <code>&lt;PersonsName&gt;-P2G</code>.  You will also need to update the <code>docker-compose.yaml</code> file to use unique names and ports for the containers.</p> <p>For this setup, tt is recommended to place P2G behind a reverse-proxy with authentication.  However, that is outside the scope of this documentation.</p>"},{"location":"install/docker/","title":"Docker","text":"<p>The recommended installation method is with Docker. If you're not familiar with Docker you can learn more here.</p> <p>P2G offers two main flavors of docker images:</p> Flavor Support Garmin 2-Step Verification Support Automatic Syncing Web UI yes only when Garmin 2fa is disabled Docker Headless partial only when Garmin 2fa is disabled <p>Image Repositories</p> <p>P2G publishes Docker images to both DockerHub and GitHub Package.</p>"},{"location":"install/docker/#tags","title":"Tags","text":"<p>P2G ships several different flavors of containers that can be combined with a version tag:</p>"},{"location":"install/docker/#image-flavors","title":"Image flavors","text":"<ol> <li><code>console</code>- The headless version of P2G, simple console application</li> <li><code>api</code> - Used in conjunction with the <code>webui</code> image, provides the API and server for P2G user interface</li> <li><code>webui</code> - Used in conjunction with the <code>api</code> image, provides a P2G web user interface</li> </ol>"},{"location":"install/docker/#version-tags","title":"Version tags","text":"<ol> <li><code>stable</code> - Always points to the latest release</li> <li><code>v{X}</code> / <code>v3</code> / <code>v4</code> - Always points to the latest of the current major version</li> <li><code>latest</code> - The bleeding edge of the master branch, breaking changes may happen</li> <li><code>vX.Y.Z</code> - For using a specific released version</li> </ol>"},{"location":"install/docker/#using-flavor-and-version-tag-together","title":"Using Flavor and Version Tag together","text":"<p>In the below examples, you can substitute <code>console</code> for any Image Flavor.</p> <ol> <li><code>console-latest</code></li> <li><code>console-stable</code></li> <li><code>console-v4</code></li> <li><code>console-v3.6.0</code></li> </ol>"},{"location":"install/docker/#docker-user","title":"Docker User","text":"<p>The P2G images run the process under the user and group <code>p2g:p2g</code> with uid and gid <code>1015:1015</code>.  To access files created by <code>p2g</code>:</p> <ol> <li>Create a group on the local machine <code>p2g</code> with group id <code>1015</code></li> <li>Add your user on the local machine to the <code>p2g</code> group</li> </ol> <pre><code>&gt; sudo groupadd -g 1015 p2g\n&gt; sudo usermod -aG p2g &lt;yourUser&gt;\n</code></pre>"},{"location":"install/docker/#more-about-docker","title":"More about Docker","text":"<p>Docker provides an easy and consistent way to install, update, and uninstall applications across multiple Operating Systems.  Docker is extremely popular in the self-hosted community, a group interested in minimizing dependencies on Cloud providers in favor of attempting to keep their data local, private, and free.  You can learn more about the ever growing list of self-hosted applications on the awesome-selfhosted list.</p> <p>To learn more about Docker head on over to their website.</p>"},{"location":"install/docker/#mac-windows-docker-quick-start","title":"Mac / Windows Docker Quick Start","text":"<ol> <li>Download and install Docker Desktop, this will give you all the tools you need and a handy UI for managing docker containers<ol> <li>Install Mac Docker Desktop</li> <li>Install Windows Docker Desktop</li> </ol> </li> <li>Follow the remaining instructions here</li> </ol>"},{"location":"install/github-action/","title":"Github Actions","text":"<p>A Github Actions workflow exists that can be used to automatically sync your rides on a schedule (by default once a day).</p>"},{"location":"install/github-action/#install","title":"\u2b07\ufe0f Install","text":"<p>The following steps will walk you through:</p> <ol> <li>Creating an account on GitHub</li> <li>Creating a personal copy of the P2G repo</li> <li>Configuring your personal P2G copy</li> <li>Setting up the P2G Github Action to run on a scehdule or on demand</li> </ol>"},{"location":"install/github-action/#1-fork-the-repository","title":"1. Fork the Repository","text":"<p>The easiest way to use the action is to simply create a fork of the repo using the <code>Fork</code> button.</p> <ol> <li>Create an account on GitHub</li> <li>Navigate to the P2G repo</li> <li>In the upper right hand corner, click the button that says <code>Fork</code></li> <li>Make note of or bookmark the url to your forked copy so that you\u2019ll be able to easily find it again later when you\u2019re ready to sync.</li> <li>Continue on to the Secrets instructions below</li> </ol>"},{"location":"install/github-action/#2-setup-secrets","title":"2. Setup Secrets","text":"<p>Once you've created your fork, you'll need to set a number of secrets in your repository.  Secrets are a tool for storing sensitive information our Action will need (like email and password) in a way that is private and not visible to others.</p> <ol> <li>From your forked copy of P2G, click the <code>Settings</code></li> <li>Then, on the side nav, select <code>Secrets</code> and then <code>Actions</code>.</li> <li>Continue on to the Action Permissions instructions below, then come back here</li> </ol> <p>From this point on you can add secrets by clicking the <code>New repository secret</code> button at the top right.</p> Secret Name Value <code>P2G_PELOTON__EMAIL</code> The email address you use to login to Peloton <code>P2G_PELOTON__PASSWORD</code> The password that you use to login to Peloton <code>P2G_GARMIN__EMAIL</code> The email address that you use to login to Garmin <code>P2G_GARMIN__PASSWORD</code> The password that you use to log into Garmin"},{"location":"install/github-action/#action-permissions","title":"Action Permissions","text":"<p>In order for our newly created Action to run, we need to ensure it has the right permissions configured.</p> <ol> <li>From your forked copy of P2G, click the <code>Settings</code> tab</li> <li>Navigate to the settings for <code>Actions &gt; General</code></li> <li>Under <code>Action Permissions</code> choose the 4th radio button titled: \"Allow , and select non-, actions and reusable workflows\". <li>Under the same radio button, check the checkbox to \"Allow actions created by GitHub\"</li>"},{"location":"install/github-action/#3-running-the-action","title":"3. Running the Action","text":"<p>Once you've configured your secrets, you can then navigate to the <code>Actions</code> tab within your repository.</p> <ol> <li>Enable actions for your fork.</li> <li>You can now run the <code>Sync workflow</code> manually</li> </ol> <p>To have tha action run on a schedule set the <code>cron</code> line in the <code>./github/workflows/sync_peloton_to_garmin.yml</code> file.</p>"},{"location":"install/github-action/#4-configuration","title":"4. Configuration","text":"<p>Nearly all of your configuration is done in this file <code>./github/workflows/sync_peloton_to_garmin.yml</code>.  The only exception is for <code>Secret</code> data which is configured using the Secrets feature of GitHub.</p> <p>You can learn more about customizing your configuration over in the Configuration Section.</p>"},{"location":"install/github-action/#updating","title":"\u2b06\ufe0f Updating","text":"<ol> <li>Make a copy of your current configuration in <code>.github/workflows/sync_peloton_to_garmin.yml</code> as you will need to reapply these changes after updating.</li> <li>From the home page of your forked repository, there should be a button to <code>Sync fork</code>, click this to pull in the latest changes from the original repo.<ol> <li>If prompted always choose the latest new changes coming in over any customization you have done.  You can always re-apply your customization afterwards.</li> </ol> </li> <li>Go back to your <code>.github/workflows/sync_peloton_to_garmin.yml</code> and re-apply any changes from step 1.</li> </ol>"},{"location":"install/github-action/#uninstalling","title":"\u274c Uninstalling","text":"<ol> <li>From your fokred copy of P2G, click the <code>Settings</code> tab</li> <li>Under <code>General</code> scoll all the way to the bottom of the page to the <code>Danger Zone</code> section</li> <li>Click <code>Delete this repository</code> and follow the guided steps</li> </ol> <p>Danger</p> <p>This is non-recoverable.  Any and all customizations will be lost.  You can re-install P2G again by starting over.</p>"},{"location":"install/github-action/#changing-versions","title":"#\ufe0f\u20e3 Changing Versions","text":"<ol> <li>In your forked copy of P2G navigate to <code>./github/workflows/sync_peloton_to_garmin.yml</code></li> <li>Find this line</li> <li>The identifier <code>console-stable</code> can be edited to any of the supported tags</li> </ol> <p>Warning</p> <p>Attempting to use configuration or data from a later version of P2G with an older version is not guaranteed to work. You may need to reconfigure your instance.</p>"},{"location":"install/github-action/#multiple-users","title":"\ud83d\udc6a Multiple Users","text":"<p>Have each person follow the install steps here.</p>"},{"location":"install/github-action/#limitations","title":"\ud83d\udea7 Limitations","text":"<p>Due to technical limitations, Garmin accounts protected by MFA/2FA are not supported with this install method.</p>"},{"location":"install/source/","title":"Build from Source","text":"<p>To compile and run P2G on your machine, follow the below steps.</p>"},{"location":"install/source/#install","title":"\u2b07\ufe0f Install","text":"<ol> <li>Install the latest dotnet 9.0 SDK</li> <li>Clone the GitHub repository locally, this will result in P2G being cloned into a folder <code>peloton-to-garmin</code></li> </ol> <p>Proceed with the following steps for the specific flavor of P2G you would like to use.</p> <ol> <li>Console</li> <li>WebUI</li> <li>Windows Application</li> </ol>"},{"location":"install/source/#console","title":"Console","text":"<p>Open a terminal and run the provided commands.</p> <pre><code>&gt; cd peloton-to-garmin\n&gt; dotnet restore ./src/ConsoleClient/ConsoleClient.csproj\n&gt; dotnet build ./src/ConsoleClient/ConsoleClient.csproj\n</code></pre> <ol> <li>Inside the <code>peloton-to-garmin</code> folder, find the file named <code>configuration.example.json</code>. Make a copy of it and name it <code>configuration.local.json</code>.</li> <li>Move <code>configuration.local.json</code> into the <code>src/ConsoleClient</code> directory</li> <li>Open <code>configuration.local.json</code> in a text editor of your choice and edit it to use your Peloton and Garmin credentials</li> </ol> <p>You can learn more about customizing your configuration over in the Configuration Section.  You will apply any customizations to the <code>configuration.local.json</code> file we just created.</p> <p>When you're ready to start P2G, run the below command.  This will be used any time you want to run the application.</p> <pre><code>&gt; dotnet run --project ./src/ConsoleClient/ConsoleClient.csproj\n</code></pre>"},{"location":"install/source/#webui","title":"WebUI","text":"<p>Open a terminal and run the provided commands.</p> <pre><code>&gt; cd peloton-to-garmin\n&gt;\n&gt; dotnet restore ./src/WebUI/WebUI.csproj\n&gt; dotnet build ./src/WebUI/WebUI.csproj\n&gt;\n&gt; dotnet restore ./src/Api/Api.csproj\n&gt; dotnet build ./src/Api/Api.csproj\n</code></pre> <p>When you're ready to start P2G, run the below commands.  You will likely need to open two terminal windows and run one command in each.</p> <pre><code>&gt; dotnet run --project ./src/WebUI/WebUI.csproj\n</code></pre> <pre><code>&gt; dotnet run --project ./src/Api/Api.csproj\n</code></pre> <p>P2G will now be available at <code>http://localhost:8080</code>.</p> <p>You can learn more about customizing your configuration over in the Configuration Section.</p>"},{"location":"install/source/#windows-application","title":"Windows Application","text":"<p>Tip</p> <p>These steps only work on a Windows machine.</p> <p>Open a terminal and run the provided commands.</p> <pre><code>&gt; cd peloton-to-garmin\n&gt;\n&gt; dotnet restore ./src/ClientUI/ClientUI.csproj\n&gt; dotnet build ./src/ClientUI/ClientUI.csproj\n&gt; dotnet run --project ./src/ClientUI/ClientUI.csproj\n</code></pre> <p>You can learn more about customizing your configuration over in the Configuration Section.</p>"},{"location":"install/source/#updating","title":"\u2b06\ufe0f Updating","text":"<p>Open a terminal and run the below commands from within the <code>peloton-to-garmin</code> directory:</p> <pre><code>&gt; cd peloton-to-garmin\n&gt; git fetch &amp;&amp; git pull\n</code></pre> <p>Refer back to the Install section for your flavor of P2G.  You will need to run the following commands again for your specific flavor.</p> <pre><code>&gt; dotnet restore\n&gt; dotnet build\n&gt; dotnet run\n</code></pre>"},{"location":"install/source/#uninstalling","title":"\u274c Uninstalling","text":"<p>Simply delete your P2G folder. Done.</p> <p>Warning</p> <p>On most systems this will move P2G to your Trash folder, which means you can restore it from there if needed.  However, once it is deleted from your Trash, it will no longer be recoverable.  This includes all of your configuration and settings.</p>"},{"location":"install/source/#changing-versions","title":"#\ufe0f\u20e3 Changing Versions","text":"<ol> <li>Find the release you want from the releases page</li> <li>From your P2G folder, run <code>git checkout &lt;tag&gt;</code>, for example <code>get checkout v4.4.0</code>, this will update your local copy of P2G to be that version</li> </ol> <p>Refer back to the Install section for your flavor of P2G.  You will need to run the following commands again for your specific flavor.</p> <pre><code>&gt; dotnet restore\n&gt; dotnet build\n&gt; dotnet run\n</code></pre> <p>Warning</p> <p>Attempting to use configuration or data from a later version of P2G with an older version is not guaranteed to work. You may need to reconfigure your instance.</p>"},{"location":"install/source/#multiple-users","title":"\ud83d\udc6a Multiple Users","text":"<p>To setup P2G for an additional user, simply clone P2G again into a new Folder named <code>&lt;PersonsName&gt;-P2G</code>.  When <code>PersonsName</code> would like to launch P2G, they should do so by running the specified commands from a terminal in this folder.</p>"},{"location":"install/source/#limitations","title":"\ud83d\udea7 Limitations","text":"<p>Building from Source is not the preferred method of running P2G.  It can be tedious and error prone and difficult to receive support from others for when things go wrong.</p>"},{"location":"install/windows/","title":"Windows","text":"<p>P2G provides a Windows application available for download. When you download the application, everything P2G needs to run is self-contained in the folder you downloaded.  This includes all of your settings and other configuration files.  </p> <p>For this reason,</p> <ol> <li>You can always download and run a newer version of P2G without any risk of breaking your existing version.</li> <li>P2G does not yet support multiple users, but you can have two instances of P2G on the same computer, each in a different folder, setup for a different user</li> <li>To uninstall P2G simply delete its folder</li> <li>You may wish to create a Desktop shortcut to the application for convenience</li> </ol> <p></p>"},{"location":"install/windows/#install","title":"\u2b07\ufe0f Install","text":"<ol> <li>Download and unzip the latest stable release</li> <li>Find the <code>ClientUI.exe</code></li> <li>Double click to run it!</li> </ol> <p>You can learn more about customizing your configuration over in the Configuration Section.</p> <p>Tip</p> <p>Right click on the <code>ClientUI.exe</code> and choose <code>Create Shortcut</code>.  Place this created shortcut somewhere easy to find, such as on your Desktop.  If you have multiple people using P2G, consider renaming the shortcut to <code>&lt;Your Name&gt;-P2G</code>.</p>"},{"location":"install/windows/#updating","title":"\u2b06\ufe0f Updating","text":"<ol> <li>Download and unzip the latest stable release</li> <li>In the unzipped directory replace the <code>configuration.local.json</code> with your previous <code>configuration.local.json</code> file</li> <li>In the unzipped directory copy over the <code>data</code> folder from your previous P2G install folder, this will preserve your settings</li> <li>Find the <code>ClientUI.exe</code></li> <li>Double click to run it!</li> </ol> <p>Tip</p> <p>If you previously had setup a Shortcut, you'll need to delete and re-create it.</p>"},{"location":"install/windows/#uninstalling","title":"\u274c Uninstalling","text":"<p>Simply delete your P2G folder. Done.</p> <p>Warning</p> <p>On most systems this will move P2G to your Trash folder, which means you can restore it from there if needed.  However, once it is deleted from your Trash, it will no longer be recoverable.  This includes all of your configuration and settings.</p>"},{"location":"install/windows/#changing-versions","title":"#\ufe0f\u20e3 Changing Versions","text":"<ol> <li>Find the release you want from the releases page</li> <li>Download and unzip the Windows exe from that relase (found in the <code>Assets</code> section)</li> <li>In the unzipped directory replace the <code>configuration.local.json</code> with your previous <code>configuration.local.json</code> file</li> <li>In the unzipped directory copy over th <code>data</code> folder from your previous P2G install folder, this will preserve your settings</li> <li>Find the <code>ClientUI.exe</code></li> <li>Double click to run it!</li> </ol> <p>Warning</p> <p>Attempting to use configuration or data from a later version of P2G with an older version is not guaranteed to work. You may need to reconfigure your instance.</p>"},{"location":"install/windows/#available-versions","title":"Available Versions","text":"<p>P2G provides two different versions of the executable you can choose between:</p> <ol> <li>The latest stable version</li> <li>The latest dev version<ol> <li>Click on the first item in the list with a green checkmark, this will be the latest successful build.</li> <li>On the summary page, at the bottom you will see a section called <code>Artifacts</code> with various builds attached. Click on one of these builds to download for your operating system.</li> </ol> </li> </ol>"},{"location":"install/windows/#multiple-users","title":"\ud83d\udc6a Multiple Users","text":"<p>To setup P2G for an additional user, simply download P2G again into a new Folder named <code>&lt;PersonsName&gt;-P2G</code>.  When <code>PersonsName</code> would like to launch P2G, they should do so by clicking on the <code>ClientUI.exe</code> from this folder.  Addtionally, for convenience you can create a unique shortcut for <code>PersonsName</code> such as <code>PersonsName-P2G.exe</code>.</p> <p>Tip</p> <p>Right click on the <code>ClientUI.exe</code> and choose <code>Create Shortcut</code>.  Place this created shortcut somewhere easy to find, such as on your Desktop.  If you have multiple people using P2G, consider renaming the shortcut to <code>&lt;Your Name&gt;-P2G</code>.</p>"},{"location":"install/windows/#limitations","title":"\ud83d\udea7 Limitations","text":"<p>Due to technical limitations, automatic/background syncing is not currently supported when using the Windows application.  Instead you must manually launch the application and select the workouts you would like to sync each time.</p>"},{"location":"migration/migrate-v1-v2/","title":"Migrating from V1 to V2","text":"<p>Version 2 of P2G is a complete rewrite of Version 1 into dotnet. Version 2 has feature parity with Version 1 and additional new features. One of the key benefits of Version 2 over Version 1 is the ability to generate and upload FIT files. FIT files are able to capture more data than the TCX format used in Version 1.</p> <p>Version 2 will not interfere with your Version 1 install, so if anything doesn't work for you on V2, you can always return to using V1.</p>"},{"location":"migration/migrate-v1-v2/#steps","title":"Steps","text":""},{"location":"migration/migrate-v1-v2/#1-backup-your-current-config","title":"1. Backup your current config","text":"<ol> <li>Navigate to where you currently have version 1 installed</li> <li>Rename the folder to something like <code>p2g_v1</code></li> </ol>"},{"location":"migration/migrate-v1-v2/#2-download-v2","title":"2. Download v2","text":"<ol> <li>Download and install v2, see Install</li> </ol>"},{"location":"migration/migrate-v1-v2/#3-migrate-your-config","title":"3. Migrate your config","text":"<ol> <li>Find your original v1 <code>config.ini</code> file and open it</li> <li>In a new window, find the v2 <code>configuration.local.json</code> file and open it</li> <li>Below walks through section by section how the old config maps to the new config values.</li> </ol>"},{"location":"migration/migrate-v1-v2/#peloton-section","title":"Peloton section","text":"<pre><code>[PELOTON]\nEmail = pelotonEmail@example.com\nPassword = pelotonPassword\nWorkoutTypes = cycling, strength \n</code></pre> Property New Config Notes Email Peloton Config.Email Password Peloton Config.Password WorkoutTypes Peloton Config.ExcludeWorkoutTypes In v1 this was a list of workout types to include, in v2 this changes to a list of workout types to exclude."},{"location":"migration/migrate-v1-v2/#garmin-section","title":"Garmin section","text":"<pre><code>[GARMIN]\nUploadEnabled = false\nEmail = garminEmail@example.com\nPassword = garminPassword\n</code></pre> Property New Config Notes Email Garmin Config.Email Password Garmin Config.Password UploadEnabled Garmin Config.Upload You will additionally need to specify <code>FormatToUpload</code> if you have this enabled."},{"location":"migration/migrate-v1-v2/#ptog-section","title":"PTOG Section","text":"<pre><code>[PTOG]\nEnablePolling = false\nPollingIntervalSeconds = 600\n</code></pre> Property New Config Notes EnablePolling App Config.EnablePolling PollingIntervalSeconds App Config.PollingIntervalSeconds"},{"location":"migration/migrate-v1-v2/#output-section","title":"Output Section","text":"<pre><code>[OUTPUT]\nDirectory = Output\nWorkingDirectory = Working\nArchiveDirectory = Archive\nRetainFiles = true\nArchiveFiles = true\nSkipDownload = true\nArchiveByType = true\n</code></pre> Property New Config Notes Directory none WorkingDirectory App Config.WorkingDirectory ArchiveDirectory App Config.OutputDirectory RetainFiles Format Config.SaveLocalCopy ArchiveFiles none SkipDownload none ArchiveByType Format Config.[Fit,Tcx,Json] Set the formats you want to save to true and then set <code>SaveLocalCopy: true</code>"},{"location":"migration/migrate-v1-v2/#logger-section","title":"Logger Section","text":"<pre><code>[LOGGER]\nLogFile = peloton-to-garmin.log\nLogLevel = INFO\n</code></pre> Property New Config Notes LogFile Observability Config.Serilog.WriteTo.Args.Path LogLevel Observability Config.Serilog.MinimumLevel <p>For the general use case, the below config should be sufficient.</p> <pre><code>\"Observability\": {\n\n    \"Serilog\": {\n      \"Using\": [ \"Serilog.Sinks.Console\", \"Serilog.Sinks.File\" ],\n      \"MinimumLevel\": \"Information\",\n      \"WriteTo\": [\n        { \"Name\": \"Console\" },\n        {\n          \"Name\": \"File\",\n          \"Args\": {\n            \"path\": \"./peloton-to-garmin.txt\",\n            \"rollingInterval\": \"Day\",\n            \"retainedFileCountLimit\": 7\n          }\n        }\n      ]\n    }\n  }\n</code></pre>"},{"location":"migration/migrate-v1-v2/#debug-section","title":"Debug Section","text":"<pre><code>[DEBUG]\nPauseOnFinish = true\n</code></pre> Property New Config Notes PauseOnFinish App Config.CloseWindowOnFinish"},{"location":"migration/migrate-v2-v3/","title":"Migrating from V2 to V3","text":"<p>Version 3 only includes one breaking change that some users will need to account for. Based on your install type you can find what changes need to be made below.</p>"},{"location":"migration/migrate-v2-v3/#windows-exe","title":"Windows Exe","text":"<p>No changes are needed.</p>"},{"location":"migration/migrate-v2-v3/#docker","title":"Docker","text":"<p>No changes are needed, though you may wish to switch over to the Web UI image tags.</p>"},{"location":"migration/migrate-v2-v3/#source","title":"Source","text":"<ol> <li>Install the latest dotnet 6.0 SDK</li> </ol>"},{"location":"migration/migrate-v3-v4/","title":"Migrating from V3 to V4","text":"<p>Version 3 only includes one breaking change that some users will need to account for. Based on your install type you can find what changes need to be made below.</p>"},{"location":"migration/migrate-v3-v4/#windows-exe","title":"Windows Exe","text":"<p>The P2G windows exe now provides a proper user interface. You can migrate to this new version simply by following the install steps.  You will need to re-configure P2G using the user interface as your settings will not migrate over.</p> <p>There is no risk installing v4 and trying it out. Your previous install will continue to work while you test out v4.  When you're satisfied with v4 you can delete your previous version of P2G.</p>"},{"location":"migration/migrate-v3-v4/#github-action","title":"GitHub Action","text":"<p>Follow the updating instructions for GitHub Actions.  A couple notable changes that will be pulled in:</p> <ol> <li>Container Image tag has changed to <code>console-stable</code>, you may wish to edit this to be <code>console-v4</code></li> <li>The configuration options have changed slightly with some fields being deprecated and removed</li> <li>The command to run p2g has changed to <code>/app/ConsoleClient</code>.</li> </ol>"},{"location":"migration/migrate-v3-v4/#docker-headless","title":"Docker Headless","text":"<p>No specific migration steps are needed, however please take note of the breaking changes in case any of these impact your setup.</p>"},{"location":"migration/migrate-v3-v4/#docker-webui","title":"Docker WebUI","text":"<p>No specific migration steps are needed, however please take note of the breaking changes in case any of these impact your setup.</p>"},{"location":"migration/migrate-v3-v4/#docker-api","title":"Docker API","text":"<p>No specific migration steps are needed, however please take note of the breaking changes in case any of these impact your setup.</p>"},{"location":"migration/migrate-v3-v4/#source","title":"Source","text":"<ol> <li>Install the latest dotnet 7.0 SDK</li> </ol> <p>Please take note of the breaking changes in case any of these impact your setup.</p>"},{"location":"migration/migrate-v4-v5/","title":"Migrating from V4 to V5","text":"<p>Version 5 introduces a few breaking changes.  Not every change will require action from you.</p> <p>First, identify your install method.  Then, use the table below to determine if you need to take any special action.  A \u2714\ufe0f means there is something for you to do.  Follow the hyperlink to see what steps to take.</p> Breaking Change Build From Source Docker Headless Docker WebUI GitHubAction Windows Exe .NET 9 \u2714\ufe0f \u274c \u274c \u274c \u274c DeviceInfoPath replaced by DeviceInfoSettings \u2714\ufe0f \u2714\ufe0f \u274c \u2714\ufe0f \u274c Fixed Non-Root Docker \u274c \u2714\ufe0f \u2714\ufe0f \u2714\ufe0f \u274c"},{"location":"migration/migrate-v4-v5/#breaking-changes","title":"Breaking Changes","text":""},{"location":"migration/migrate-v4-v5/#net-9","title":".NET 9","text":"<ol> <li>Install the latest dotnet 9.0 SDK</li> </ol>"},{"location":"migration/migrate-v4-v5/#deviceinfopath-replaced-by-deviceinfosettings","title":"DeviceInfoPath replaced by DeviceInfoSettings","text":"<p>If you have not configured or made use of the DeviceInfoPath setting then you do not need to make any changes.</p> <p>If you are running P2G v4.2.0 or later then it is possible you have already made the needed changes as the new settings format was introduced with that version.</p> <p>If you are running P2G in a way that allows it to persist its settings across restarts, then you should not need to do anything specific, P2G will automatically migrate the old <code>DeviceInfoPath</code> setting into the new <code>DeviceInfoSettings</code> format.  For example if you are using the WebUI or the Windows Exe, then you likely do not need to do anything.</p> <p>If you use GitHub Actions or if you are not persisting P2G settings across restarts then you will need to manually update your settings.  If you have made use of the <code>DeviceInfoPath</code> setting then you will need to update it to follow the new format of <code>DeviceInfoSettings</code>.</p> <p>The new settings structure is explained here.</p>"},{"location":"migration/migrate-v4-v5/#fixed-non-root-docker","title":"Fixed Non-Root Docker","text":"<p>Previously running P2G as a rootless container did not quite work.  Depending on how you worked around this in your personal setup you may encounter permission issues on the latest version of P2G.</p> <p>If you encounter issues, start by trying the below steps:</p> <ol> <li>Ensure you have created a Group <code>p2g</code> with GroupId of <code>1015</code>, see Docker User</li> <li>Ensure existing config and setting files are editable by the <code>p2g</code> Group</li> <li>Update your containers to run with <code>user: :p2g</code>. See docker-compose.yaml</li> </ol>"},{"location":"migration/migrate-v4-v5/#github-action-users","title":"GitHub Action Users","text":"<p>If you use GitHub Actions for running P2G then the fix for this has already been applied to the latest version of the workflow file.  You can follow the normal Updating steps to get the latest version.</p>"},{"location":"migration/migrations/","title":"Migrating from older P2G Versions","text":"<p>P2G uses major release versions to designate when a breaking or non-backwards compatible change has been made. For this reason, when moving between major versions there may be some one time steps that need to be followed.</p> <ol> <li>Migrating from V1 to V2</li> <li>Migrating from V2 to V3</li> <li>Migrating from V3 to V4</li> <li>Migrating from V4 to V5</li> </ol>"}]}