{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Home","text":"<p>Sync your Peloton workouts to Garmin locally and for free.</p> <p></p> <ul> <li>Fetch latest workouts from Peloton</li> <li>Create backups</li> <li>Automatically upload your workouts to Garmin</li> <li>And more...</li> </ul>"},{"location":"#head-on-over-to-the-install-page-to-get-started","title":"Head on over to the Install page to get started!","text":""},{"location":"#example-usage","title":"Example Usage","text":"<ol> <li>Do a Peloton Workout!<ol> <li>If you use your Garmin device to send HR data to the Peloton Bike or Tread then at the end of your workout do not save the workout on your watch, discard it.</li> </ol> </li> <li>Sync your workout using P2G<ol> <li>You can go to your computer and manually run P2G to sync recent workouts</li> <li>OR You can configure P2G to run in the background on your computer, syncing workouts once a day</li> </ol> </li> </ol> <p>Supported Platforms</p> <ul> <li>Windows</li> <li>Mac</li> <li>Linux</li> <li>Docker</li> </ul>"},{"location":"#contributors","title":"Contributors","text":"<p>Special thanks to all the contributors who have helped improve this project!</p>"},{"location":"contributing/","title":"Contributing","text":"<p>Enhancements and fixes are always welcome. Feel free to contribute to any of the Issues not already assigned to another person.</p>"},{"location":"contributing/#pull-requests","title":"Pull Requests","text":"<p>Ensure that your code:</p> <ol> <li>Compiles</li> <li>Follows established conventions of the codebase</li> <li>Unit tests have been added and pass</li> <li>Docs have been updated</li> </ol>"},{"location":"contributing/#development","title":"Development","text":"<ol> <li>Install dotent 6.0 runtime</li> </ol> <pre><code>&gt; dotnet restore\n&gt; dotnet build\n&gt; dotnet run ./src/ConsoleClient/ConsoleClient.csproj\n</code></pre>"},{"location":"contributing/#package-windows-exe","title":"Package Windows exe","text":"<pre><code>&gt; dotnet publish ./src/ConsoleClient/ConsoleClient.csproj --no-restore -c Release -r win10-x64 -o ./dist --version-suffix local\n</code></pre>"},{"location":"contributing/#developing-against-garmin-upload-python-library","title":"Developing against garmin-upload python library","text":"<ol> <li>Install Python 3 and pip</li> <li>Set <code>\"PythonAndGUploadInstalled\": true</code></li> </ol> <pre><code>&gt; cd peloton-to-garmin\n&gt; cd python\n&gt; pip install -r requirements.txt\n</code></pre>"},{"location":"contributing/#compile-python-exe","title":"Compile python exe","text":"<pre><code>&gt; cd python\n&gt; pip install -r requirements.txt\n&gt; pip install pyinstaller\n&gt; pyinstaller -n upload --distpath ./ --console --clean --noconfirm upload.py\n</code></pre>"},{"location":"contributing/#contribute-to-the-docs","title":"Contribute to the docs","text":"<p>The docs site can be run locally using docker for faster development.</p> <pre><code>&gt; cd peloton-to-garmin/docs\n&gt; docker-compose up\n</code></pre> <p>Browse to <code>http://localhost:4000</code> to see the docs site. The docker container watches for file changes and will hot reload.  Some of the navigation links may not work as expected locally, if you see the url change to <code>http://0.0.0.0/somePage.html</code> simply change it to <code>http://localhost/somePage.html</code> and the page will render.</p>"},{"location":"faq/","title":"F.A.Q.","text":"<p>Below are a list of commonly asked questions. For even more help head on over to the discussion forum.</p>"},{"location":"faq/#vo2-max-and-tss","title":"VO2 Max and TSS","text":"<p>Garmin will only generate a VO2 max for your workouts if all of the following criteria are met:</p> <ol> <li>Your personal Garmin device already supports VO2 Max Calculations</li> <li>You have not configured a custom device info file (i.e. you are using the defaults)</li> <li>You have met all of Garmin's VO2 requirements for your workout type</li> </ol>"},{"location":"faq/#garmin-two-step-verification","title":"Garmin Two Step Verification","text":"<p>Only some install options have support for Garmin Two Step Verification.  In all cases, automatic-syncing is never supported when your Garmin account is protected by two step verification.</p>"},{"location":"faq/#garmin-upload-not-working","title":"Garmin Upload Not Working","text":"<p>Sometimes, auth failures with Garmin are only temporary. For this reason, a failure to upload will not kill your sync job. Instead, P2G will stage the files and try to upload them again on the next sync interval. You can also always manually upload your files, you do not need to worry about duplicates.</p> <p>If the problem persists head on over to the discussion forum to see if others are experiencing the same issue and to track any open issues.</p>"},{"location":"faq/#my-config-file-is-not-working","title":"My config file is not working","text":"<ol> <li>Windows Executable - Ensure you config is saved in a file named <code>configuration.local.json</code> that is in the same directory as the executable.</li> <li>Docker - Ensure you are correctly passing in or mounting a config file named <code>configuration.local.json</code></li> <li>Verify your config file is in valid json format. You can copy paste the contents into this online tool to verify.</li> </ol> <p>If the problem persists head on over to the discussion forum to get help.</p>"},{"location":"faq/#my-zones-are-missing-the-range-values-in-garmin-connect","title":"My Zones are missing the range values in Garmin Connect","text":"<p>See Understanding custom zones.</p>"},{"location":"features/","title":"Features","text":"<p>Convert, Backup, and Sync your Peloton workouts to Garmin Connect locally and for free.</p>"},{"location":"features/#workout-data","title":"Workout Data","text":"<ol> <li>Workout Types Supported<ol> <li>Bike</li> <li>Tread</li> <li>Rower</li> <li>Meditation</li> <li>Strength</li> <li>Outdoor</li> <li>and more</li> </ol> </li> <li>Workout Data<ol> <li>Heart Rate</li> <li>Cadence</li> <li>Target Cadence</li> <li>Distance</li> <li>Power</li> <li>Laps</li> <li>and more</li> </ol> </li> <li>Strength Data<ol> <li>Exercise Name</li> <li>Rep count</li> <li>Weight</li> </ol> </li> </ol>"},{"location":"features/#garmin-sync","title":"Garmin Sync","text":"<ol> <li>Supports Garmin accounts protected by Two Step Verification</li> <li>Synced workouts count towards Garmin Badges and Challenges</li> <li>Synced workouts count towards VO2 Max 1 and Training Stress Scores</li> </ol>"},{"location":"features/#p2g","title":"P2G","text":"<ol> <li>Syncs on-demand or on a schedule</li> <li>Highly configurable</li> <li>Docker-ized</li> <li>OpenTelemetry for the data nerds</li> </ol>"},{"location":"features/#typical-usage","title":"Typical Usage","text":"<ol> <li>Do a Peloton Workout!<ol> <li>If you use your Garmin device to send HR data to the Peloton Bike or Tread then at the end of your workout do not save the workout on your watch, discard it.</li> </ol> </li> <li>Sync your workout with P2G<ol> <li>You can go to your computer and manually run P2G to sync recent workouts</li> <li>OR You can configure P2G to run in the background on your computer, syncing workouts once a day</li> </ol> </li> <li>P2G can be configured to download your workout data and save it to your computer AND it can automatically upload those workouts to Garmin Connect</li> </ol>"},{"location":"features/#screenshots","title":"Screenshots","text":""},{"location":"features/#converted-and-imported-cycling-workout","title":"Converted and imported Cycling Workout","text":""},{"location":"features/#stats-view","title":"Stats View","text":""},{"location":"features/#cadence-targets","title":"Cadence Targets","text":""},{"location":"features/#laps","title":"Laps","text":""},{"location":"features/#ui","title":"UI","text":""},{"location":"help/","title":"Help","text":"<p>If you are encountering a problem, here are some resources that may help you.</p>"},{"location":"help/#discussion-forum","title":"Discussion Forum","text":"<p>Search the Discussion Forum to see if your topic has already been discussed before.  Take note that the search bar lets you filter by <code>open</code> and <code>closed</code> discussions, it is beneficial to check both.</p> <p>Have a question? Need help with something?</p> <p>The Discussion Forum is the best place to post.  When posting please ensure you are providing the right details.</p>"},{"location":"help/#issues","title":"Issues","text":"<p>Bugs, feature requests, and more often get tracked in the Issues tab in Github. This is also a great place to search for information.  Particularly important issues that impact many people will usually be pinned and highly visible.  Take note that the search bar lets you filter by <code>open</code> and <code>closed</code> issues, it is beneficial to check both.</p> <p>Have a feature idea? Encountered a bug?</p> <p>Creating a new Issue is the best place to post.  When posting please ensure you are providing the right details.</p>"},{"location":"help/#providing-the-right-details","title":"Providing the right details","text":"<p>P2G can be run in a variety of different ways and its difficult for people to provide help if they have to guess about your particular setup.  When asking for help, or logging a bug, please be sure to include the below information at a minimum for the most effective help:</p> <ol> <li>How are you running P2G? In other words, which install mtehod did you choose when you setup P2G?</li> <li>What version of P2G are you running?</li> <li>A copy of the log files that were generated, ideally the entire log file, not just the part where you see an error. See Finding logs.</li> </ol>"},{"location":"help/#finding-logs","title":"Finding logs","text":""},{"location":"help/#headless-docker-headless","title":"Headless / Docker Headless","text":"<p>The log files will be written to <code>output/log&lt;datetime&gt;.txt</code>.</p>"},{"location":"help/#windows-ui-web-ui","title":"Windows UI / Web UI","text":"<p>Naviate to the <code>About</code> page, then click the <code>Logs</code> tab.  Additionally, the log files will be written to <code>output/log&lt;datetime&gt;.txt</code>.</p>"},{"location":"help/#github-actions","title":"GitHub Actions","text":"<p>If your forked repository is public, then you can simply provide a link to the repository and people can view the necessary logs from there.  If your repository is private then to find the logs for a given run:</p> <ol> <li>Go to your copy of the repository</li> <li>Select the <code>Actions</code> tab, along the top left of the view</li> <li>Click the very first `Sync workflow`` item to open up that workflow</li> <li>In the left hand menu, under Jobs click <code>sync</code></li> <li>Finally, expand the item that says <code>Run /app/PelotonToGarminConsole</code></li> <li>Share the logs from this view</li> </ol>"},{"location":"help/#finding-version","title":"Finding version","text":"<p>Version information is always written as the first thing in the log file.  Additionally, on a UI version of P2G you can find the version information on the <code>About</code> page.</p>"},{"location":"observability/","title":"Observability","text":"<p>P2G supports publishing Open Telemetry metrics. These metrics can be setup and configured in the Observability config section. P2G publishes the following:</p> <ol> <li>Logs via Serilog. Logs can be sunk to a variety of sources including Console, File, ElasticSearch, and Grafana Loki.</li> <li>Metrics via Prometheus. Metrics are exposed on a standard <code>/metrics</code> endpoint and the port is configurable.</li> <li>Traces via Jaeger. Traces can be collected via an agent of your choice. Some options include Jaeger Agent/Jaeger Query, or Grafana Tempo.</li> <li>P2G also provides a sample Grafana dashboard which can be found in the repository.</li> </ol> <p>The grafana dashboard assumes you have the following datasources setup but can be easily modified to meet your needs:</p> <ol> <li>Prometheus</li> <li>Loki</li> <li>If running as a docker image a docker metrics exporter</li> </ol> <p></p>"},{"location":"configuration/","title":"Configuration","text":"<p>P2G supports configuration via command line arguments, environment variables, json config file, and via the user interface. By default, P2G looks for a file named <code>configuration.local.json</code> in the same directory where it is run.</p>"},{"location":"configuration/#example-working-configs","title":"Example working configs","text":"<ol> <li>Headless config</li> <li>WebUI configs</li> </ol>"},{"location":"configuration/#config-precedence","title":"Config Precedence","text":"<p>The following defines the precedence in which config definitions are honored. With the first item overriding any below it.</p> <ol> <li>Command Line</li> <li>Environment Variables</li> <li>Config File</li> </ol> <p>For example, if you defined your Peloton credentials ONLY in the Config file, then the Config file credentials will be used.</p> <p>If you defined your credentials in both the Config file AND the Environment variables, then the Environment variable credentials will be used.</p> <p>If you defined credentials using all 3 methods (config file, env, and command line), then the credentials provided via the command line will be used.</p>"},{"location":"configuration/command-line/","title":"Command Line Configuration","text":"<p>All of the values defined in the Json config file can also be defined as command line arguments. This functionality is provided by the default dotnet IConfiguration interface.</p>"},{"location":"configuration/environment-variables/","title":"Environment Variable Configuration","text":"<p>All of the values defined in the Json config file can also be defined as environment variables. This functionality is provided by the default dotnet IConfiguration interface.</p> <p>The variables use the following convention, note the use of both single and double underscores:</p> <pre><code>P2G_CONFIGSECTION__CONFIGPROPERTY=value\n</code></pre>"},{"location":"configuration/environment-variables/#example-app-config","title":"Example App Config","text":"<pre><code>P2G_APP__WORKINGDIRECTORY\nP2G_APP__ENABLEPOLLING\nP2G_APP__POLLINGINTERVALSECONDS\nP2G_APP__PYTHONANDGUPLOADINSTALLED\n</code></pre>"},{"location":"configuration/environment-variables/#example-arrays","title":"Example Arrays","text":"<pre><code>P2G_PELOTON__EXCLUDEWORKOUTTYPES__0=\"meditation\"\nP2G_PELOTON__EXCLUDEWORKOUTTYPES__1=\"stretching\"\nP2G_PELOTON__EXCLUDEWORKOUTTYPES__2=\"yoga\"\n...and so on\n</code></pre>"},{"location":"configuration/environment-variables/#example-nested-sections","title":"Example Nested Sections","text":"<p>For nested config sections, continue to use the same naming convention of defining the entire json path using <code>__</code> double underscores, and 0 based indexing for array values.</p> <pre><code>P2G_OBSERVABILITY__SERILOG__WRITETO__0__NAME=\"File\"\n</code></pre>"},{"location":"configuration/json/","title":"Json Config File","text":"<p>Based on your installation method, configuration may be provided via a <code>configuration.local.json</code> or it may be done via the user interface.  In the below documentation you will see the information for both the JSON config file, and the Web UI.</p> <p>By default, P2G looks for a file named <code>configuration.local.json</code> in the same directory where the program is run.</p> <p>The config file is written in JSON and supports hot-reload for all fields except the following:</p> <ol> <li><code>App.PollingintervalSeconds</code></li> <li><code>Observability</code> Section</li> </ol> <p>The config file is organized into the below sections.</p> Section Platforms Description Api Config Web UI This section provides global settings for the P2G Api. WebUI Config Web UI This section provides global settings for the P2G Web UI. App Config Headless This section provides global settings for the P2G application. Format Config Headless This section provides settings related to conversions and what formats should be created/saved. Peloton Config Headless This section provides settings related to fetching workouts from Peloton. Garmin Config Headless This section provides settings related to uploading workouts to Garmin. Observability Config All This section provides settings related to Metrics, Logs, and Traces for monitoring purposes."},{"location":"configuration/json/#api-config","title":"Api Config","text":"<p>If you aren't running the Web UI version of P2G you can ignore this section.  </p> <p>This section lives in <code>webui.local.json</code>.</p> <pre><code> \"Api\": {\n      \"HostUrl\": \"http://p2g-api:8080\"\n    }\n</code></pre> Field Required Default UI Setting Location Description HostUrl yes <code>null</code> none The host and port for the Web UI to communicate with the Api."},{"location":"configuration/json/#advanced-usage","title":"Advanced usage","text":"<p>Typically this section is only needed in the <code>webui.local.json</code> so that the Web UI knows where to find the running Api.  However, if you have a unique setup and need to modify the Host and Port the Api binds to, then you can also provide this config section in the <code>api.local.json</code>.</p> <pre><code> \"Api\": {\n      \"HostUrl\": \"http://*:8080\"\n    }\n</code></pre> Field Required Default UI Setting Location Description HostUrl no <code>http://localhost:8080</code> none The host and port the Api should bind to and listen on."},{"location":"configuration/json/#webui-config","title":"WebUI Config","text":"<p>If you aren't running the Web UI version of P2G you can ignore this section.</p> <p>You can provide this config section in the <code>webui.local.json</code>.</p> <pre><code> \"WebUI\": {\n      \"HostUrl\": \"http://*:8080\"\n    }\n</code></pre> Field Required Default UI Setting Location Description HostUrl no <code>http://localhost:8080</code> none The host and port the WebUI should bind to and listen on."},{"location":"configuration/json/#app-config","title":"App Config","text":"<p>This section provides global settings for the P2G application.</p> <pre><code> \"App\": {\n    \"EnablePolling\": true,\n    \"PollingIntervalSeconds\": 86400,\n    \"CheckForUpdates\": true\n  }\n</code></pre> Field Required Default UI Setting Location Description EnablePolling no <code>true</code> <code>App Tab</code> <code>true</code> if you wish P2G to run continuously and poll Peloton for new workouts. PollingIntervalSeconds no 86400 <code>App Tab</code> The polling interval in seconds determines how frequently P2G should check for new workouts. Be warned, that setting this to a frequency of hourly or less may get you flagged by Peloton as a bad actor and they may reset your password. The default is set to Daily. CheckForUpdates no <code>true</code> <code>App Tab</code> <code>true</code> if P2G should check for updates and write a log message if a new release is available. If using the UI this message will display there as well."},{"location":"configuration/json/#format-config","title":"Format Config","text":"<p>This section provides settings related to conversions and what formats should be created/saved.  P2G supports converting Peloton workouts into a variety of different formats.  P2G also lets you choose whether or not you wish to save a local copy when the conversion is completed. This can be useful if you wish to backup your workouts or upload them manually to a different service other than Garmin.</p> <pre><code>\"Format\": {\n    \"Fit\": true,\n    \"Json\": false,\n    \"Tcx\": false,\n    \"SaveLocalCopy\": false,\n    \"IncldudeTimeInHRZones\": false,\n    \"IncludeTimeInPowerZones\": false,\n    \"DeviceInfoPath\": \"./deviceInfo.xml\",\n    \"Cycling\": {\n      \"PreferredLapType\": \"Class_Targets\"\n    },\n    \"Running\": {\n      \"PreferredLapType\": \"Distance\"\n    },\n    \"Rowing\": {\n      \"PreferredLapType\": \"Class_Segments\"\n    },\n    \"Strength\": {\n      \"DefaultSecondsPerRep\": 3\n    },\n    \"WorkoutTitlePrefix\": \"Peloton - \"\n  }\n</code></pre> Field Required Default UI Setting Location Description Fit no <code>false</code> <code>Conversion Tab</code> <code>true</code> indicates you wish downloaded workouts to be converted to FIT Json no <code>false</code> <code>Conversion Tab</code> <code>true</code> indicates you wish downloaded workouts to be converted to JSON. This will automatically save a local copy when enabled. Tcx no <code>false</code> <code>Conversion Tab</code> <code>true</code> indicates you wish downloaded workouts to be converted to TCX SaveLocalCopy no <code>false</code> <code>Conversion &gt; Advanced</code> <code>true</code> will save any converted workouts to your specified OutputDirectory IncludeTimeInHRZones no <code>false</code> <code>Conversion &gt; Advanced</code> Only use this if you are unable to configure your Max HR on Garmin Connect. When set to True, P2G will attempt to capture the time spent in each HR Zone per the data returned by Peloton. See understanding custom zones. IncludePowerInHRZones no <code>false</code> <code>Conversion &gt; Advanced</code> Only use this if you are unable to configure your FTP and Power Zones on Garmin Connect. When set to True, P2G will attempt to capture the time spent in each Power Zone per the data returned by Peloton. See understanding custom zones. DeviceInfoPath no <code>null</code> <code>Conversion &gt; Advanced</code> The path to your <code>deviceInfo.xml</code> file. See providing device info Cycling no <code>null</code> none Configuration specific to Cycling workouts. Cycling.PreferredLapType no <code>Default</code> <code>Conversion Tab</code> The preferred lap type to use. Running no <code>null</code> none Configuration specific to Running workouts. Running.PreferredLapType no <code>Default</code> <code>Conversion Tab</code> The preferred lap type to use. Rowing no <code>null</code> none Configuration specific to Rowing workouts. Rowing.PreferredLapType no <code>Default</code> <code>Conversion Tab</code> The preferred lap type to use. Strength no <code>null</code> <code>Conversion Tab</code> Configuration specific to Strength workouts. Strength.DefaultSecondsPerRep no <code>3</code> <code>Conversion Tab</code> For exercises that are done for time instead of reps, P2G can estimate how many reps you completed using this value. Ex. If <code>DefaultSecondsPerRep=3</code> and you do Curls for 15s, P2G will estimate you completed 5 reps. WorkoutTitlePrefix no <code>null</code> <code>Conversion Tab</code> A Title Prefix to apply to all workouts.  By default applies no prefix."},{"location":"configuration/json/#understanding-custom-zones","title":"Understanding Custom Zones","text":"<p>Garmin Connect expects that users have a registered device and they expect users have set up their HR and Power Zones on that device. However, this presents a problem if you either A) do not have a device capable of tracking Power or B) do not have a Garmin device at all.</p> <p>The most common scenario for Peloton users is A, where they do not own a Power capable Garmin device and therefore are not able to configure their Power Zones in Garmin Connect.  If you do not have Power or HR zones configured in Garmin Connect then you are not able to view accurate <code>Time In Zones</code> charts for a given workout.</p> <p>P2G provides a work around for this by optionally enriching the workout with the <code>Time In Zones</code> data with one caveat: the chart will not display the range value for the zone.</p> <p></p> <p>This is only available when generating and uploading the FIT format.</p>"},{"location":"configuration/json/#custom-device-info","title":"Custom Device Info","text":"<p>By default, P2G using a custom device when converting and upload workouts.  This device information is needed in order to count your Peloton workouts towards Challenges and Badges on Garmin. However, you may observe on Garmin Connect that your Peloton workouts will show a device image that does not match your personal device.</p> <p>If you choose, you can provide P2G with your personal Device Info which will cause the Garmin workout to show the correct to device. Note, this is completely optional and is only for cosmetic preference, your workout will be converted, uploaded, and counted towards challenges regardless of whether this matches your personal device.</p> <p>See configuring device info for detailed steps on how to create your <code>deviceInfo.xml</code>.</p>"},{"location":"configuration/json/#lap-types","title":"Lap Types","text":"<p>P2G supports several different strategies for creating Laps in Garmin Connect.  If a certain strategy is not available P2G will attempt to fallback to a different strategy.  You can override this behavior by specifying your preferred Lap type in the config. When <code>PreferredLapType</code> is set, P2G will first attempt to generate your preferred type and then fall back to the default behavior if it is unable to.  By default P2G will:</p> <ol> <li>First try to create laps based on <code>Class_Targets</code></li> <li>Then try to create laps based on <code>Class_Segments</code></li> <li>Finally fallback to create laps based on <code>Distance</code></li> </ol> Strategy Config Value Description Class Targets <code>Class_Targets</code> If the Peloton data includes Target Cadence information, then laps will be created to match any time the Target Cadence changed.  You must use this strategy if you want the Target Cadence to show up in Garmin on the Cadence chart. Class Segments <code>Class_Segments</code> If the Peloton data includes Class Segment information, then laps will be created to match each segment: Warm Up, Cycling, Weights, Cool Down, etc. Distance <code>Distance</code> P2G will caclulate Laps based on distance for each 1mi, 1km, or 500m (for Row only) based on your distance setting in Peloton."},{"location":"configuration/json/#peloton-config","title":"Peloton Config","text":"<p>This section provides settings related to fetching workouts from Peloton.</p> <pre><code>\"Peloton\": {\n    \"Email\": \"peloton@gmail.com\",\n    \"Password\": \"peloton\",\n    \"NumWorkoutsToDownload\": 1,\n    \"ExcludeWorkoutTypes\": [ \"meditation\" ]\n  }\n</code></pre> <p>Warning</p> <p>Console or Docker Headless: Your username and password for Peloton and Garmin Connect are stored in clear text, which is not secure. Please be aware of the risks.</p> <p>WebUI version 3.3.0: Credentials are stored encrypted.</p> <p>GitHub Actions: Credentials are stored encrypted.</p> Field Required Default UI Setting Location Description Email yes <code>null</code> <code>Peloton Tab</code> Your Peloton email used to sign in Password yes <code>null</code> <code>Peloton Tab</code> Your Peloton password used to sign in NumWorkoutsToDownload no 5 <code>Peloton Tab</code> The default number of workouts to download. See choosing number of workouts to download.  Set this to <code>0</code> if you would like P2G to prompt you each time for a number to download. ExcludeWorkoutTypes no none <code>Peloton Tab</code> A comma separated list of workout types that you do not want P2G to download/convert/upload. See example use cases below."},{"location":"configuration/json/#choosing-number-of-workouts-to-download","title":"Choosing Number of Workouts To Download","text":"<p>When choosing the number of workouts P2G should download each polling cycle its important to keep your configured PollingInterval in mind. If, for example, your polling interval is set to hourly, then you may want to set <code>NumWorkoutsToDownload</code> to 4 or greater. This ensures if you did four 15min workouts during that hour they would all be captured.</p>"},{"location":"configuration/json/#exclude-workout-types","title":"Exclude Workout Types","text":"<p>Example use cases:</p> <ol> <li>You take a wide variety of Peloton classes, including meditation and you want to skip uploading meditation classes.</li> <li>You want to avoid double-counting activities you already track directly on a Garmin device, such as outdoor running workouts.</li> </ol> <p>The available values are:</p> <pre><code>  Cycling\n  Outdoor Cycling\n  BikeBootcamp\n  TreadmillRunning\n  OutdoorRunning\n  TreadmillWalking\n  OutdoorWalking\n  Cardio\n  Circuit\n  Strength\n  Stretching\n  Yoga\n  Meditation\n</code></pre>"},{"location":"configuration/json/#garmin-config","title":"Garmin Config","text":"<p>This section provides settings related to uploading workouts to Garmin.</p> <pre><code>\"Garmin\": {\n    \"Email\": \"garmin@gmail.com\",\n    \"Password\": \"garmin\",\n    \"TwoStepVerificationEnabled\": false,\n    \"Upload\": false,\n    \"FormatToUpload\": \"fit\"\n  }\n</code></pre> <p>Warning</p> <p>Console or Docker Headless: Your username and password for Peloton and Garmin Connect are stored in clear text, which is not secure. Please be aware of the risks.</p> <p>WebUI version 3.3.0: Credentials are stored encrypted.</p> <p>GitHub Actions: Credentials are stored encrypted.</p> Field Required Default UI Setting Location Description Email yes - if Upload=true <code>null</code> <code>Garmin Tab</code> Your Garmin email used to sign in Password yes - if Upload=true <code>null</code> <code>Garmin Tab</code> Your Garmin password used to sign in TwoStepVerificationEnabled no <code>false</code> <code>Garmin Tab</code> Whether or not your Garmin account is protected by Two Step Verification Upload no <code>false</code> <code>Garmin Tab</code> <code>true</code> indicates you wish downloaded workouts to be automatically uploaded to Garmin for you. FormatToUpload no <code>fit</code> <code>Garmin Tab &gt; Advanced</code> Valid values are <code>fit</code> or <code>tcx</code>. Ensure the format you specify here is also enabled in your Format config"},{"location":"configuration/json/#observability-config","title":"Observability Config","text":"<p>P2G supports publishing OpenTelemetry Metrics, Logs, and Trace. This section provides settings related to those pillars.</p> <p>The Observability config section contains three main sub-sections:</p> <ol> <li>Prometheus - Metrics</li> <li>Jaeger - Traces</li> <li>Serilog - Logs</li> </ol> <pre><code>\"Observability\": {\n\n    \"Prometheus\": {\n      \"Enabled\": false,\n      \"Port\": 4000\n    },\n\n    \"Jaeger\": {\n      \"Enabled\": false,\n      \"AgentHost\": \"localhost\",\n      \"AgentPort\": 6831\n    },\n\n    \"Serilog\": {\n      \"Using\": [ \"Serilog.Sinks.Console\", \"Serilog.Sinks.File\" ],\n      \"MinimumLevel\": \"Information\",\n      \"WriteTo\": [\n        { \"Name\": \"Console\" },\n        {\n          \"Name\": \"File\",\n          \"Args\": {\n            \"path\": \"./output/log.txt\",\n            \"rollingInterval\": \"Day\",\n            \"retainedFileCountLimit\": 7\n          }\n        }\n      ]\n    }\n  }\n</code></pre>"},{"location":"configuration/json/#prometheus-config","title":"Prometheus Config","text":"<pre><code>\"Prometheus\": {\n      \"Enabled\": false,\n      \"Port\": 4000\n    }\n</code></pre> Field Required Default Description Enabled no <code>false</code> Whether or not to expose metrics. Metrics will be available at <code>http://localhost:{port}/metrics</code> Port no <code>80</code> The port the metrics endpoint should be served on. Only valid for Console mode, not Api/WebUI <p>If you are using Docker, ensure you have exposed the port from your container.</p>"},{"location":"configuration/json/#example-prometheus-scraper-config","title":"Example Prometheus scraper config","text":"<pre><code>- job_name: 'p2g'\n    scrape_interval: 60s\n    static_configs:\n      - targets: [&lt;p2gIPaddress&gt;:&lt;p2gPort&gt;]\n    tls_config:\n      insecure_skip_verify: true\n</code></pre>"},{"location":"configuration/json/#jaeger-config","title":"Jaeger Config","text":"<pre><code>\"Jaeger\": {\n      \"Enabled\": false,\n      \"AgentHost\": \"localhost\",\n      \"AgentPort\": 6831\n    }\n</code></pre> Field Required Default Description Enabled no <code>false</code> Whether or not to generate traces. AgentHost yes - if Enalbed=true <code>null</code> The host address for your trace collector. AgentPort yes - if Enabled=true <code>null</code> The port for your trace collector."},{"location":"configuration/json/#serilog-config","title":"Serilog Config","text":"<pre><code>\"Serilog\": {\n      \"Using\": [ \"Serilog.Sinks.Console\", \"Serilog.Sinks.File\", \"Serilog.Sinks.Grafana.Loki\" ],\n      \"MinimumLevel\": {\n        \"Default\": \"Information\",\n        \"Override\": {\n          \"Microsoft\": \"Error\",\n          \"System\": \"Error\"\n        }\n      },\n      \"WriteTo\": [\n        { \"Name\": \"Console\" },\n        {\n          \"Name\": \"File\",\n          \"Args\": {\n            \"path\": \"./output/log.txt\",\n            \"rollingInterval\": \"Day\",\n            \"retainedFileCountLimit\": 7\n          }\n        },\n        {\n          \"Name\": \"GrafanaLoki\",\n          \"Args\": {\n            \"uri\": \"http://192.168.1.95:3100\",\n            \"textFormatter\": \"Serilog.Sinks.Grafana.Loki.LokiJsonTextFormatter, Serilog.Sinks.Grafana.Loki\",\n            \"labels\": [\n              {\n                \"key\": \"app\",\n                \"value\": \"p2g\"\n              }\n            ]\n          }\n        }]\n}\n</code></pre> Field Required Default Description Using no <code>null</code> A list of sinks you would like use. The valid sinks are listed in the examplea above. MinimumLevel no <code>null</code> The minimum level to write. <code>[Verbose, Debug, Information, Warning, Error, Fatal]</code> WriteTo no <code>null</code> Additional config for various sinks you are writing to. <p>More detailed information about configuring Logging can be found on the Serilog Config Repo.</p>"},{"location":"configuration/providing-device-info/","title":"Device Info","text":"<p>A given workout must be associated with a Garmin device in order for it to count towards Challenges and Badges on Garmin.  Additionaly, certain devices also unlock additional data fields and measurements on Garmin Connect.  The default devices used by P2G have been chosen specifically to ensure you get the most data possible out of your Peloton workouts.</p> <p>By default, P2G uses the TACX App device type for Cycling activities. At this time, TACX is the only device that is known to unlock the cycling VO2 Max calculation on Garmin Connect.  For all other workout types, P2G defaults to using a Fenix 6 device.</p> <p>This means on Garmin Connect your Peloton workouts will show a device image that does not match your personal Garmin device.</p>"},{"location":"configuration/providing-device-info/#vo2-max","title":"VO2 Max","text":"<p>Garmin unlocks certain workout metrics and fields based on the Garmin device you personally own, one of those metrics is VO2 Max.  This means that if your personal device supports VO2 Max calucations, then your Peloton workouts will also generate VO2 Max when using the default P2G device settings.  If your personal device does not support VO2 Max calculations, then unfortunately your Peloton workouts will also not generate any VO2 Max data.</p> <p>You can check the Owners Manual for your personal device to see if it already supports the VO2 max field.</p>"},{"location":"configuration/providing-device-info/#custom-device-info","title":"Custom Device Info","text":"<p>If you choose, you can provide P2G with your personal Device Info which will cause the workouts to show the same device you normally use.</p> <p>Note:</p> <ul> <li>Setting your personal device is completely optional, P2G will work just fine without this extra information</li> <li>Setting your personal device may cause you to not see certain fields on Garmin (see notes about VO2 max above)</li> <li>Setting your personal device will mean it is applied on all workout types from Peloton</li> </ul>"},{"location":"configuration/providing-device-info/#steps","title":"Steps","text":"<ol> <li>Get your Garmin current device info<ol> <li>Log on to Garmin connect and find an activity you recorded with your device</li> <li>In the upper right hand corner of the activity, click the gear icon and choose <code>Export to TCX</code></li> <li>A TCX file will be downloaded to your computer</li> </ol> </li> <li>Prepare your device info for P2G<ol> <li>Find the TCX file you downloaded in part 1 and open it in any text editor.</li> <li>Use <code>ctrl-f</code> (<code>cmd-f</code> on mac) to find the <code>&lt;Creator</code> section in the file, it will look similar to the sample device info below.</li> <li>Delete everything else in this file except for the <code>Creator</code> section</li> <li>If your <code>Creator</code> section contains something like <code>&lt;Creator xsi:type=\"Device_t\"&gt;</code>, delete the <code>xsi...</code> so that the final structure matches the example below</li> <li>Save the file as <code>deviceInfo.xml</code></li> </ol> </li> <li>Configure P2G to use the device info file<ol> <li>Move your prepared <code>deviceInfo.xml</code> file so that it is in your P2G folder</li> <li>Modify the DeviceInfoPath to point to the location of your <code>deviceInfo.xml</code><ol> <li>If you are using Docker, ensure you have mounted the files location into the container</li> </ol> </li> </ol> </li> </ol>"},{"location":"configuration/providing-device-info/#example","title":"Example","text":"<pre><code>&lt;Creator&gt;\n  &lt;Name&gt;Garmin Sample Device - please create from exported TCX file&lt;/Name&gt;\n  &lt;UnitId&gt;00000000000&lt;/UnitId&gt;\n  &lt;ProductID&gt;0000&lt;/ProductID&gt;\n  &lt;Version&gt;\n    &lt;VersionMajor&gt;0&lt;/VersionMajor&gt;\n    &lt;VersionMinor&gt;0&lt;/VersionMinor&gt;\n    &lt;BuildMajor&gt;0&lt;/BuildMajor&gt;\n    &lt;BuildMinor&gt;0&lt;/BuildMinor&gt;\n  &lt;/Version&gt;\n&lt;/Creator&gt;\n</code></pre>"},{"location":"install/","title":"Install","text":"<p>P2G can be run on all major operating systems.</p> Operating System Support Garmin 2-Step Verification Windows yes Mac yes Linux yes I don't want to install anything no"},{"location":"install/#windows-quick-start","title":"Windows Quick Start","text":"<ol> <li>Windows Executable - recommended unless you are comfortable with Docker on Windows</li> <li>Docker</li> <li>Build from Source</li> </ol>"},{"location":"install/#mac-quick-start","title":"Mac Quick Start","text":"<ol> <li>Docker</li> <li>Build from Source</li> </ol>"},{"location":"install/#linux-quick-start","title":"Linux Quick Start","text":"<ol> <li>Docker - recommended</li> <li>Build from Source</li> </ol>"},{"location":"install/#github-actions","title":"GitHub Actions","text":"<p>If you would rather not install anything on your computer, you can run P2G using a feature called <code>GitHub Actions</code>, this will require you to create an account on <code>GitHub</code>.  Additionally, your Garmin account must not have Two Step Verification enabled.</p> <ol> <li>GitHub Actions</li> </ol>"},{"location":"install/docker-headless/","title":"Docker Headless","text":"<p>This flavor of P2G runs without any user interface and relies on configuration from <code>configuration.local.json</code> file.</p> <p>DockerHub</p> <pre><code>docker run -i -v /full/path/to/configuration.local.json:/app/configuration.local.json -v /full/path/to/output:/app/output philosowaffle/peloton-to-garmin:stable\n</code></pre> <p>GitHub Package</p> <pre><code>docker run -i -v /full/path/to/configuration.local.json:/app/configuration.local.json -v /full/path/to/output:/app/output ghcr.io/philosowaffle/peloton-to-garmin:stable\n</code></pre>"},{"location":"install/docker-headless/#docker-compose","title":"docker-compose","text":"<p>Pre-requisite: You have either <code>docker-compose</code> or <code>Docker Desktop</code> installed This method does not work with Garmin accounts protected by Two Step Verification</p> <ol> <li>Create a directory <code>p2g-headless</code><ol> <li>Inside this folder create a docker-compose.yaml file in the directory</li> <li>Also create a configuration.local.json file in the directory.</li> <li>Edit the configuration file to use your Peloton and Garmin credentials</li> </ol> </li> <li>Open a terminal in this folder</li> <li>Run: <code>docker-compose pull &amp;&amp; docker-compose up -d</code></li> </ol> <p>Any logs or generated files will be available in the <code>output</code> directory.  Additionally, you can learn more about customizing your configuration over in the Configuration Section</p>"},{"location":"install/docker-headless/#to-stop-p2g","title":"To stop P2G","text":"<ol> <li>You can use Docker Desktop application to kill the containers</li> <li>Or, you can open a terminal in the <code>p2g-headless</code> folder<ol> <li>Run: <code>docker-compose down</code></li> </ol> </li> </ol>"},{"location":"install/docker-headless/#to-update-p2g","title":"To update P2G","text":"<ol> <li>Open a terminal in the <code>p2g-headless</code> folder<ol> <li>Run: <code>docker-compose pull &amp;&amp; docker-compose up -d</code></li> </ol> </li> </ol>"},{"location":"install/docker-headless/#prometheus","title":"Prometheus","text":"<p>If you configure P2G to serve Prometheus metrics then you will also need to map the corresponding port for your docker container. By default, Prometheus metrics will be served on port <code>4000</code>. You can learn more about P2G and Prometheus in the Observability Configuration section.</p>"},{"location":"install/docker-webui/","title":"Docker - Web UI","text":"<p>P2G provides a website user interface. Some key features include:</p> <ol> <li>Configure your settings via a user interface</li> <li>Trigger a sync from any browser (your computer, your phone, etc.)</li> <li>Sync service can still run in the background, syncing periodically</li> <li>OpenApi for custom scripts and workflows</li> </ol> <p></p>"},{"location":"install/docker-webui/#docker-compose","title":"docker-compose","text":"<p>Pre-requisite: You have either <code>docker-compose</code> or <code>Docker Desktop</code> installed</p> <ol> <li>Create a folder named <code>p2g-webui</code><ol> <li>Inside this folder create docker-compose.yaml</li> <li>Also create api.local.json</li> <li>Also create webui.local.json</li> </ol> </li> <li>Open a terminal in this folder</li> <li>Run: <code>docker-compose pull &amp;&amp; docker-compose up -d</code><ol> <li>This will pull the containers and start them up running in the background</li> <li>You can close the terminal at this time</li> </ol> </li> <li>Open a browser and navigate to <code>http://localhost:8002</code></li> </ol> <p>Any logs or generated files will be available in the <code>output</code> directory.  Additionally, you can learn more about customizing your configuration over in the Configuration Section</p>"},{"location":"install/docker-webui/#to-stop-p2g","title":"To stop P2G","text":"<ol> <li>You can use Docker Desktop application to kill the containers</li> <li>Or, you can open a terminal in the <code>p2g-webui</code> folder<ol> <li>Run: <code>docker-compose down</code></li> </ol> </li> </ol>"},{"location":"install/docker-webui/#to-update-p2g","title":"To update P2G","text":"<ol> <li>Open a terminal in the <code>p2g-webui</code> folder<ol> <li>Run: <code>docker-compose pull &amp;&amp; docker-compose up -d</code></li> </ol> </li> </ol>"},{"location":"install/docker-webui/#configuration","title":"Configuration","text":"<p>If you are migrating to the Web UI for the first time you will need to reconfigure most of your settings using the user interface.  The only settings that are carried over and still configured via the configuration file are the ones related to <code>Observability</code>.</p>"},{"location":"install/docker-webui/#open-api","title":"Open Api","text":"<p>To access the Open API spec  for P2G you will need to expose the below port on the Api docker container.  The open API spec will be available at <code>http://localhost:8001/swagger</code>.</p> <pre><code>version: \"3.9\"\n\nservices:\n  p2g-api:\n    container_name: p2g-api\n    image: philosowaffle/peloton-to-garmin:api-stable\n    environment:\n      - TZ=America/Chicago\n    ports:\n      - 8001:8080 # to access the api or swagger docs\n    volumes:\n      - ./api.local.json:/app/configuration.local.json\n      - ./data:/app/data\n      - ./output:/app/output\n\n  p2g-webui:\n    container_name: p2g-webui\n    image: philosowaffle/peloton-to-garmin:webui-stable\n    ports:\n      - 8002:8080\n    environment:\n      - TZ=America/Chicago\n    volumes:\n      - ./webui.local.json:/app/configuration.local.json\n    depends_on:\n      - p2g-api\n</code></pre>"},{"location":"install/docker/","title":"Docker","text":"<p>The recommended installation method is with Docker. If you're not familiar with Docker but would like to try it check out the quick start guide.</p> <p>P2G offers two main flavors of docker images:</p> Flavor Support Garmin 2-Step Verification Support Automatic Syncing Web UI yes only when Garmin 2fa is disabled Docker Headless partial only when Garmin 2fa is disabled <p>Image Repositories</p> <p>P2G publishes Docker images to both DockerHub and GitHub Package.</p>"},{"location":"install/docker/#tags","title":"Tags","text":"<p>P2G ships several different flavors of containers that can be combined with a version tag:</p>"},{"location":"install/docker/#image-flavors","title":"Image flavors","text":"<ol> <li><code>console</code>- The headless version of P2G, simple console application</li> <li><code>api</code> - Used in conjunction with the <code>webui</code> image, provides the API and server for P2G user interface</li> <li><code>webui</code> - Used in conjunction with the <code>api</code> image, provides a P2G web user interface</li> </ol>"},{"location":"install/docker/#version-tags","title":"Version tags","text":"<ol> <li><code>stable</code> - Always points to the latest release</li> <li><code>v{X}</code> / <code>v3</code> / <code>v4</code> - Always points to the latest of the current major version</li> <li><code>latest</code> - The bleeding edge of the master branch, breaking changes may happen</li> <li><code>vX.Y.Z</code> - For using a specific released version</li> </ol>"},{"location":"install/docker/#using-flavor-and-version-tag","title":"Using Flavor and Version Tag","text":"<p>In the below examples, you can substitute <code>console</code> for any Image Flavor.</p> <ol> <li><code>console-latest</code></li> <li><code>console-stable</code></li> <li><code>console-v4</code></li> <li><code>console-v3.6.0</code></li> </ol>"},{"location":"install/docker/#docker-user","title":"Docker User","text":"<p>The P2G images run the process under the user and group <code>p2g:p2g</code> with uid and gid <code>1015:1015</code>.  To access files created by <code>p2g</code>:</p> <ol> <li>Create a group on the local machine <code>p2g</code> with group id <code>1015</code></li> <li>Add your user on the local machine to the <code>p2g</code> group</li> </ol>"},{"location":"install/docker/#quick-start-guide","title":"Quick Start Guide","text":"<p>Docker provides an easy and consistent way to install, update, and uninstall applications across multiple Operating Systems.  Docker is extremely popular in the self-hosted community, a group interested in minimizing dependencies on Cloud providers in favor of attempting to keep their data local, private, and free.  You can learn more about the ever growing list of self-hosted applications on the awesome-selfhosted list.</p> <p>To learn more about Docker head on over to their website.</p>"},{"location":"install/docker/#mac-windows-docker-quick-start","title":"Mac / Windows Docker Quick Start","text":"<ol> <li>Download and install Docker Desktop, this will give you all the tools you need and a handy UI for managing docker containers<ol> <li>Install Mac Docker Desktop</li> <li>Install Windows Docker Desktop</li> </ol> </li> <li>Follow the remaining instructions here</li> </ol>"},{"location":"install/github-action/","title":"Github Actions","text":"<p>A Github Actions workflow exists that can be used to automatically sync your rides on a schedule (by default once a day). </p> <p>Warning</p> <p>This option does not support Garmin accounts protected by Two Step Verification.</p>"},{"location":"install/github-action/#getting-started","title":"Getting started","text":"<p>The easiest way to use the action is to simply create a fork of the repo using the <code>Fork</code> button.</p> <ol> <li>Create an account on GitHub</li> <li>Navigate to the P2G repo</li> <li>In the upper right hand corner, click the button that says <code>Fork</code></li> <li>Make note of the url to your forked copy</li> <li>Continue on to the Secrets instructions below</li> </ol>"},{"location":"install/github-action/#secrets","title":"Secrets","text":"<p>Once you've created your fork, you'll need to set a number of secrets in your repository.</p> <ol> <li>From your forked copy of P2G, click the <code>Settings</code></li> <li>Then, on the side nav, select <code>Secrets</code> and then <code>Actions</code>.</li> <li>Continue on to the Action Permissions instructions below</li> </ol> <p>From this point on you can add secrets by clicking the <code>New repository secret</code> button at the top right.</p> Secret Name Value <code>P2G_PELOTON__EMAIL</code> The email address you use to login to Peloton <code>P2G_PELOTON__PASSWORD</code> The password that you use to login to Peloton <code>P2G_GARMIN__EMAIL</code> The email address that you use to login to Garmin <code>P2G_GARMIN__PASSWORD</code> The password that you use to log into Garmin <code>DEVICE_INFO</code> The contents of the deviceInfo.xml that you want to use for the sync"},{"location":"install/github-action/#action-permissions","title":"Action Permissions","text":"<ol> <li>From your forked copy of P2G, click the <code>Settings</code> tab</li> <li>Navigate to the settings for <code>Actions &gt; General</code></li> <li>Under <code>Action Permissions</code> choose the 4th radio button titled: \"Allow , and select non-, actions and reusable workflows\". <li>Under the same radio button, check the checkbox to \"Allow actions created by GitHub\"</li>"},{"location":"install/github-action/#starting-the-workflow","title":"Starting the workflow","text":"<p>Once you've configured your secrets, you can then navigate to the <code>Actions</code> tab within your repository.</p> <ol> <li>Enable actions for your fork.</li> <li>You can now run the <code>Sync workflow</code> manually</li> </ol> <p>To have tha action run on a schedule set the <code>cron</code> line in the <code>./github/workflows/sync_peloton_to_garmin.yml</code> file.</p>"},{"location":"install/github-action/#configuration","title":"Configuration","text":"<p>If you're doing more than 5 activities a day, you will need to change the default number of workouts downloaded as part of the workflow. This is configured in the <code>./github/workflows/sync_peloton_to_garmin.yml</code> file.</p>"},{"location":"install/github-action/#updating","title":"Updating","text":"<ol> <li>Make note of your current configuration in <code>.github/workflows/sync_peloton_to_garmin.yml</code> as you may need to reapply these changes after updating.</li> <li>From the home page of your forked repository, there should be a button to <code>Sync fork</code>, click this to pull in the latest changes from the original repo.</li> <li>Go back to your <code>.github/workflows/sync_peloton_to_garmin.yml</code> and re-apply any changes from step 1.</li> </ol>"},{"location":"install/source/","title":"Build from Source","text":"<p>To compile and run P2G on your machine, follow the below steps.</p>"},{"location":"install/source/#setup","title":"Setup","text":"<ol> <li>Install the latest dotnet 7.0 SDK</li> <li>Clone the GitHub repository locally</li> <li>In the local repo, find the file named <code>configuration.example.json</code>. Make a copy of it and name it <code>configuration.local.json</code>.</li> <li>Open a terminal and run the below one-time setup steps:</li> </ol> <pre><code>&gt; cd peloton-to-garmin\n&gt; dotnet restore\n&gt; dotnet build\n</code></pre>"},{"location":"install/source/#to-run-p2g","title":"To run P2G","text":""},{"location":"install/source/#console","title":"Console","text":"<ol> <li>Move <code>configuration.local.json</code> into the <code>src/ConsoleClient</code> directory</li> <li>Open <code>configuration.local.json</code> in a text editor of your choice and edit it to use your Peloton and Garmin credentials</li> </ol> <pre><code>&gt; dotnet run --project ./src/ConsoleClient/ConsoleClient.csproj\n</code></pre>"},{"location":"install/source/#windows-ui","title":"Windows UI","text":"<pre><code>&gt; dotnet run --project ./src/ClientUI/ClientUI.csproj\n</code></pre>"},{"location":"install/source/#web-ui","title":"Web UI","text":"<pre><code>&gt; dotnet run --project ./src/WebUI/WebUI.csproj\n&gt; dotnet run --project ./src/Api/Api.csproj\n</code></pre>"},{"location":"install/source/#updating","title":"Updating","text":"<pre><code>&gt; git fetch\n&gt; git pull\n&gt; cd peloton-to-garmin\n&gt; dotnet restore\n&gt; dotnet build\n</code></pre>"},{"location":"install/windows/","title":"Windows","text":"<p>With P2G v4, there is now a Windows GUI application available for download. P2G does not install anything to your computer, everything it needs to run is self-contained in the folder you downloaded.  This includes all of your settings and other configuration files.  For this reason,</p> <ol> <li>You can always download and run a newer version of P2G without any risk of breaking your existing version.</li> <li>P2G does not yet support multiple users, but you can have two instances of P2G on the same computer, each in a different folder, setup for a different user</li> <li>To uninstall P2G simply delete its folder</li> <li>You may wish to create a Desktop shortcut to the application for convenience</li> </ol> <p></p>"},{"location":"install/windows/#install","title":"Install","text":"<ol> <li>Download and unzip the latest stable release</li> <li>Find the <code>ClientUI.exe</code></li> <li>Double click to run it!</li> </ol> <p>You can learn more about customizing your configuration over in the Configuration Section.</p>"},{"location":"install/windows/#updating","title":"Updating","text":"<ol> <li>Download and unzip the latest stable release</li> <li>In the unzipped directory replace the <code>configuration.local.json</code> with your previous <code>configuration.local.json</code> file</li> <li>In the unzipped directory copy over the <code>data</code> folder from your previous P2G install folder, this will preserve your settings</li> <li>Find the <code>ClientUI.exe</code></li> <li>Double click to run it!</li> </ol>"},{"location":"install/windows/#rolling-back-to-a-previous-version","title":"Rolling back to a previous version","text":"<ol> <li>Find the release you want from the releases page</li> <li>Download and unzip the Windows exe from that relase (found in the <code>Assets</code> section)</li> <li>In the unzipped directory replace the <code>configuration.local.json</code> with your previous <code>configuration.local.json</code> file</li> <li>In the unzipped directory copy over th <code>data</code> folder from your previous P2G install folder, this will preserve your settings</li> <li>Find the <code>ClientUI.exe</code></li> <li>Double click to run it!</li> </ol> <p>Warning</p> <p>Attempting to use configuration or data from a later version of P2G with an older version is not guaranteed to work. You may need to reconfigure your instance.</p>"},{"location":"install/windows/#available-versions","title":"Available Versions","text":"<p>P2G provides two different versions of the executable you can choose between:</p> <ol> <li>The latest stable version</li> <li>The latest dev version<ol> <li>Click on the first item in the list with a green checkmark, this will be the latest successful build.</li> <li>On the summary page, at the bottom you will see a section called <code>Artifacts</code> with various builds attached. Click on one of these builds to download for your operating system.</li> </ol> </li> </ol>"},{"location":"install/windows/#limitations","title":"Limitations","text":"<ol> <li>Does not truly run in the background, the program must be minimized to the the task bar if using it to automatically sync, and you must manually restart it if your computer reboots</li> </ol>"},{"location":"migration/migrate-v1-v2/","title":"Migrating from V1 to V2","text":"<p>Version 2 of P2G is a complete rewrite of Version 1 into dotnet. Version 2 has feature parity with Version 1 and additional new features. One of the key benefits of Version 2 over Version 1 is the ability to generate and upload FIT files. FIT files are able to capture more data than the TCX format used in Version 1.</p> <p>Version 2 will not interfere with your Version 1 install, so if anything doesn't work for you on V2, you can always return to using V1.</p>"},{"location":"migration/migrate-v1-v2/#steps","title":"Steps","text":""},{"location":"migration/migrate-v1-v2/#1-backup-your-current-config","title":"1. Backup your current config","text":"<ol> <li>Navigate to where you currently have version 1 installed</li> <li>Rename the folder to something like <code>p2g_v1</code></li> </ol>"},{"location":"migration/migrate-v1-v2/#2-download-v2","title":"2. Download v2","text":"<ol> <li>Download and install v2, see Install</li> </ol>"},{"location":"migration/migrate-v1-v2/#3-migrate-your-config","title":"3. Migrate your config","text":"<ol> <li>Find your original v1 <code>config.ini</code> file and open it</li> <li>In a new window, find the v2 <code>configuration.local.json</code> file and open it</li> <li>Below walks through section by section how the old config maps to the new config values.</li> </ol>"},{"location":"migration/migrate-v1-v2/#peloton-section","title":"Peloton section","text":"<pre><code>[PELOTON]\nEmail = pelotonEmail@example.com\nPassword = pelotonPassword\nWorkoutTypes = cycling, strength \n</code></pre> Property New Config Notes Email Peloton Config.Email Password Peloton Config.Password WorkoutTypes Peloton Config.ExcludeWorkoutTypes In v1 this was a list of workout types to include, in v2 this changes to a list of workout types to exclude."},{"location":"migration/migrate-v1-v2/#garmin-section","title":"Garmin section","text":"<pre><code>[GARMIN]\nUploadEnabled = false\nEmail = garminEmail@example.com\nPassword = garminPassword\n</code></pre> Property New Config Notes Email Garmin Config.Email Password Garmin Config.Password UploadEnabled Garmin Config.Upload You will additionally need to specify <code>FormatToUpload</code> if you have this enabled."},{"location":"migration/migrate-v1-v2/#ptog-section","title":"PTOG Section","text":"<pre><code>[PTOG]\nEnablePolling = false\nPollingIntervalSeconds = 600\n</code></pre> Property New Config Notes EnablePolling App Config.EnablePolling PollingIntervalSeconds App Config.PollingIntervalSeconds"},{"location":"migration/migrate-v1-v2/#output-section","title":"Output Section","text":"<pre><code>[OUTPUT]\nDirectory = Output\nWorkingDirectory = Working\nArchiveDirectory = Archive\nRetainFiles = true\nArchiveFiles = true\nSkipDownload = true\nArchiveByType = true\n</code></pre> Property New Config Notes Directory none WorkingDirectory App Config.WorkingDirectory ArchiveDirectory App Config.OutputDirectory RetainFiles Format Config.SaveLocalCopy ArchiveFiles none SkipDownload none ArchiveByType Format Config.[Fit,Tcx,Json] Set the formats you want to save to true and then set <code>SaveLocalCopy: true</code>"},{"location":"migration/migrate-v1-v2/#logger-section","title":"Logger Section","text":"<pre><code>[LOGGER]\nLogFile = peloton-to-garmin.log\nLogLevel = INFO\n</code></pre> Property New Config Notes LogFile Observability Config.Serilog.WriteTo.Args.Path LogLevel Observability Config.Serilog.MinimumLevel <p>For the general use case, the below config should be sufficient.</p> <pre><code>\"Observability\": {\n\n    \"Serilog\": {\n      \"Using\": [ \"Serilog.Sinks.Console\", \"Serilog.Sinks.File\" ],\n      \"MinimumLevel\": \"Information\",\n      \"WriteTo\": [\n        { \"Name\": \"Console\" },\n        {\n          \"Name\": \"File\",\n          \"Args\": {\n            \"path\": \"./peloton-to-garmin.txt\",\n            \"rollingInterval\": \"Day\",\n            \"retainedFileCountLimit\": 7\n          }\n        }\n      ]\n    }\n  }\n</code></pre>"},{"location":"migration/migrate-v1-v2/#debug-section","title":"Debug Section","text":"<pre><code>[DEBUG]\nPauseOnFinish = true\n</code></pre> Property New Config Notes PauseOnFinish App Config.CloseWindowOnFinish"},{"location":"migration/migrate-v2-v3/","title":"Migrating from V2 to V3","text":"<p>Version 3 only includes one breaking change that some users will need to account for. Based on your install type you can find what changes need to be made below.</p>"},{"location":"migration/migrate-v2-v3/#windows-exe","title":"Windows Exe","text":"<p>No changes are needed.</p>"},{"location":"migration/migrate-v2-v3/#docker","title":"Docker","text":"<p>No changes are needed, though you may wish to switch over to the Web UI image tags.</p>"},{"location":"migration/migrate-v2-v3/#source","title":"Source","text":"<ol> <li>Install the latest dotnet 6.0 SDK</li> </ol>"},{"location":"migration/migrate-v3-v4/","title":"Migrating from V3 to V4","text":"<p>Version 3 only includes one breaking change that some users will need to account for. Based on your install type you can find what changes need to be made below.</p>"},{"location":"migration/migrate-v3-v4/#windows-exe","title":"Windows Exe","text":"<p>The P2G windows exe now provides a proper user interface. You can migrate to this new version simply by following the install steps.  You will need to re-configure P2G using the user interface as your settings will not migrate over.</p> <p>There is no risk installing v4 and trying it out. Your previous install will continue to work while you test out v4.  When you're satisfied with v4 you can delete your previous version of P2G.</p>"},{"location":"migration/migrate-v3-v4/#github-action","title":"GitHub Action","text":"<p>Follow the updating instructions for GitHub Actions.  A couple notable changes that will be pulled in:</p> <ol> <li>Container Image tag has changed to <code>console-stable</code>, you may wish to edit this to be <code>console-v4</code></li> <li>The configuration options have changed slightly with some fields being deprecated and removed</li> <li>The command to run p2g has changed to <code>/app/ConsoleClient</code>.</li> </ol>"},{"location":"migration/migrate-v3-v4/#docker-headless","title":"Docker Headless","text":"<p>No specific migration steps are needed, however please take note of the breaking changes in case any of these impact your setup.</p>"},{"location":"migration/migrate-v3-v4/#docker-webui","title":"Docker WebUI","text":"<p>No specific migration steps are needed, however please take note of the breaking changes in case any of these impact your setup.</p>"},{"location":"migration/migrate-v3-v4/#docker-api","title":"Docker API","text":"<p>No specific migration steps are needed, however please take note of the breaking changes in case any of these impact your setup.</p>"},{"location":"migration/migrate-v3-v4/#source","title":"Source","text":"<ol> <li>Install the latest dotnet 7.0 SDK</li> </ol> <p>Please take note of the breaking changes in case any of these impact your setup.</p>"},{"location":"migration/migrations/","title":"Migrating from older P2G Versions","text":"<p>P2G uses major release versions to designate when a breaking or non-backwards compatible change has been made. For this reason, when moving between major versions there may be some one time steps that need to be followed.</p> <ol> <li>Migrating from V1 to V2</li> <li>Migrating from V2 to V3</li> <li>Migrating from V3 to V4</li> </ol>"}]}